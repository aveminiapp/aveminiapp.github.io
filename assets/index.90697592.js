var e=Object.defineProperty,t=Object.defineProperties,i=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,l=(t,i,s)=>i in t?e(t,i,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[i]=s;import{_ as n,b as r,c,d,e as h,f as u,m as p,r as v,s as m,h as f,i as g,j as b,k as y,l as $,n as k,o as G,p as _,q as C,t as F,u as w,v as T}from"./index.1c79211d.js";import{r as S,o as U,c as N,w as x,A as L,D as R,x as I,J as z,v as V,F as D,y as E,G as B,O,M as j,I as M,R as P,k as A}from"./vendor.b97e4876.js";const q={name:"Rename",props:{visible:Boolean,confirmSubmit:Function},emits:["update:visible","onSubmit"],data(){return{title:"",rules:[{required:!0,message:this.$t("enterGroupName")},{validator:e=>(null==e?void 0:e.length)<=10,message:this.$t("maximum10characters")}]}},computed:{dialogVisible:{get(){return this.visible},set(e){this.$emit("update:visible",e)}}},watch:{visible(e){e&&(this.title="")}},methods:{onSubmit(){this.confirmSubmit(this.title)}}},J={class:"popup-title"},H={class:"footer"};var K=n(q,[["render",function(e,t,i,s,a,o){const l=S("van-field"),n=S("van-button"),r=S("van-form"),c=S("van-popup");return U(),N(c,{show:o.dialogVisible,"onUpdate:show":t[2]||(t[2]=e=>o.dialogVisible=e),class:"popup-container",closeable:!0,"close-on-click-overlay":!1,"close-on-popstate":!1,round:"",position:"center",teleport:"#app",style:{width:"90%"}},{default:x((()=>[L("h3",J,R(e.$t("enterGroupName")),1),I(r,{class:"popup-content",onSubmit:o.onSubmit},{default:x((()=>[I(l,{modelValue:a.title,"onUpdate:modelValue":t[0]||(t[0]=e=>a.title=e),label:"",placeholder:e.$t("maximum10characters"),clearable:"",rules:a.rules},null,8,["modelValue","placeholder","rules"]),L("div",H,[I(n,{class:"btn",type:"default",round:"",onClick:t[1]||(t[1]=e=>o.dialogVisible=!1)},{default:x((()=>[z(R(e.$t("cancel")),1)])),_:1}),I(n,{class:"btn","native-type":"submit",type:"primary",round:""},{default:x((()=>[z(R(e.$t("confirm1")),1)])),_:1})])])),_:1},8,["onSubmit"])])),_:1},8,["show"])}],["__scopeId","data-v-c915b360"]]);const Q={name:"ChangeGroup",props:{visible:Boolean,title:{type:String,default:""},type:{type:String,default:"1"},isRemark:{type:Boolean,default:!1},selected:{type:[String,Number],default:0},groups:{type:Array,default:()=>[]}},components:{ChangeName:K},emits:["update:visible","update:selected","select"],data(){return{checked:this.initSelected,visible1:!1,remark:""}},computed:{show:{get(){return this.visible},set(e){this.$emit("update:visible",e)}},initSelected:{get(){return this.selected},set(e){this.$emit("update:selected",e)}}},watch:{show(e){e&&(this.checked=this.initSelected)}},methods:{select(){this.isRemark?this.$emit("select",this.checked,this.remark):this.$emit("select",this.checked)},addFavoriteGroup(e){"1"===this.type?this.addTokenFavoriteGroup(e):"2"===this.type&&this.addNftFavoriteGroup(e)},addTokenFavoriteGroup(e){if(!this.$f.verifyLogin())return;let t=this.$toast.loading({forbidClick:!0,duration:0});r(e).then((e=>{e?(this.$store.dispatch("getUserTokenFavoriteGroups"),this.$notify({type:"success",message:this.$t("success")}),this.visible1=!1):this.$notify({type:"danger",message:this.$t("fail")})})).catch((e=>{console.log(e),this.$notify({type:"danger",message:this.$t("fail")})})).finally((()=>{t.clear()}))},addNftFavoriteGroup(e){if(!this.$f.verifyLogin())return;let t=this.$toast.loading({forbidClick:!0,duration:0});c(e).then((e=>{e?(this.$store.dispatch("getUserNftFavoriteGroups"),this.$notify({type:"success",message:this.$t("success")}),this.visible1=!1):this.$notify({type:"danger",message:this.$t("fail")})})).catch((e=>{console.log(e),this.$notify({type:"danger",message:this.$t("fail")})})).finally((()=>{t.clear()}))}}},W={class:"confirm-box"};var X=n(Q,[["render",function(e,t,i,s,a,o){const l=S("van-radio"),n=S("van-cell"),r=S("van-field"),c=S("van-cell-group"),d=S("van-radio-group"),h=S("van-button"),u=S("van-action-sheet"),p=S("ChangeName");return U(),V(D,null,[I(u,{show:o.show,"onUpdate:show":t[4]||(t[4]=e=>o.show=e),description:"",title:i.title,teleport:"#app"},{default:x((()=>[I(d,{modelValue:a.checked,"onUpdate:modelValue":t[3]||(t[3]=e=>a.checked=e)},{default:x((()=>[I(c,null,{default:x((()=>[I(n,{title:e.$t("defaultGroup"),clickable:"",onClick:t[0]||(t[0]=e=>a.checked=0)},{"right-icon":x((()=>[I(l,{name:0})])),_:1},8,["title"]),(U(!0),V(D,null,E(i.groups,((e,t)=>(U(),N(n,{key:t,title:e.name,clickable:"",onClick:t=>a.checked=e.group_id},{"right-icon":x((()=>[I(l,{name:e.group_id},null,8,["name"])])),_:2},1032,["title","onClick"])))),128)),I(n,{title:e.$t("newGroup"),onClick:t[1]||(t[1]=e=>a.visible1=!0),clickable:"",icon:"add-o"},null,8,["title"]),i.isRemark?(U(),N(r,{key:0,class:"input-remark",modelValue:a.remark,"onUpdate:modelValue":t[2]||(t[2]=e=>a.remark=e),rows:"1",autosize:"",label:"",type:"textarea",placeholder:e.$t("enterRemark")},null,8,["modelValue","placeholder"])):B("",!0)])),_:1})])),_:1},8,["modelValue"]),L("div",W,[I(h,{type:"primary",onClick:O(o.select,["stop"]),round:"",block:""},{default:x((()=>[z(R(e.$t("confirm1")),1)])),_:1},8,["onClick"])])])),_:1},8,["show","title"]),I(p,{visible:a.visible1,"onUpdate:visible":t[5]||(t[5]=e=>a.visible1=e),confirmSubmit:o.addFavoriteGroup},null,8,["visible","confirmSubmit"])],64)}],["__scopeId","data-v-091171da"]]);const Y={name:"EditRemark",props:{visible:Boolean,confirmSubmit:Function,initRemark:String},emits:["update:visible","onSubmit"],data(){return{title:this.initRemark||"",rules:[{required:!0,message:this.$t("enterRemark")},{validator:e=>(null==e?void 0:e.length)<=50,message:this.$t("maximum50characters")}]}},computed:{dialogVisible:{get(){return this.visible},set(e){this.$emit("update:visible",e)}}},watch:{visible(e){e&&(this.title=this.initRemark||"")}},methods:{onSubmit(){this.confirmSubmit(this.title)}}},Z={class:"popup-title"},ee={class:"footer"};var te=n(Y,[["render",function(e,t,i,s,a,o){const l=S("van-field"),n=S("van-button"),r=S("van-form"),c=S("van-popup");return U(),N(c,{show:o.dialogVisible,"onUpdate:show":t[2]||(t[2]=e=>o.dialogVisible=e),class:"popup-container",closeable:!0,"close-on-click-overlay":!1,"close-on-popstate":!1,round:"",position:"center",teleport:"#app",style:{width:"90%"}},{default:x((()=>[L("h3",Z,R(e.$t("editRemark")),1),I(r,{class:"popup-content",onSubmit:o.onSubmit},{default:x((()=>[I(l,{modelValue:a.title,"onUpdate:modelValue":t[0]||(t[0]=e=>a.title=e),label:"",placeholder:e.$t("maximum50characters"),clearable:"",rules:a.rules},null,8,["modelValue","placeholder","rules"]),L("div",ee,[I(n,{class:"btn",type:"default",round:"",onClick:t[1]||(t[1]=e=>o.dialogVisible=!1)},{default:x((()=>[z(R(e.$t("cancel")),1)])),_:1}),I(n,{class:"btn","native-type":"submit",type:"primary",round:""},{default:x((()=>[z(R(e.$t("confirm1")),1)])),_:1})])])),_:1},8,["onSubmit"])])),_:1},8,["show"])}],["__scopeId","data-v-79195c08"]]);const ie={key:0},se={class:"fav-tabs-container"},ae={class:"table-list"},oe={class:"table-item table-header"},le={class:"table-item_d"},ne={class:"table-item_d"},re={class:"table-item_d"},ce={class:"table-item_d"},de={class:"table-item"},he={class:"token-info table-item_d"},ue={class:"icon-token-container"},pe={class:"icon-svg icon-network","aria-hidden":"true"},ve=["xlink:href"],me={class:"token-symbol"},fe={class:"table-item_d"},ge=["onClick"],be={class:"table-item_d token-sort"},ye=["onClick"],$e=["onClick"],ke=["onClick"],Ge={class:"table-item_d"},_e=["onClick"],Ce={key:1},Fe={class:"add-text"},we={class:"table-list"},Te={class:"table-item table-header"},Se={class:"table-item_d"},Ue={class:"table-item_d"},Ne={class:"table-item_d"},xe={class:"table-item_d"},Le={class:"table-item_d"},Re={class:"table-item_d"},Ie=["onClick"],ze={class:"table-item_d"},Ve=["onClick"],De=["onClick"],Ee=["onClick"],Be={class:"table-item_d"},Oe=["onClick"];var je=n({name:"TokenFavoriteManage",props:{active:{type:String,default:"1"},activeType:{type:String,default:"1"}},components:{ChangeGroup:X,ChangeName:K,EditRemark:te},data:()=>({activeGroup:0,visible1:!1,visible2:!1,visible3:!1,visible4:!1,selectedToken:{},favoritesList:[],curGroup:{},show:!1,actions:[{name:"Token",value:"1"},{name:"NFT",value:"2"}],curRemark:"",curToken:{}}),computed:{groups(){return this.$store.state.userFavoriteGroups}},watch:{activeType(e){"1"===e&&this.getUserFavorites()},activeGroup(){this.getUserFavorites()},groups:{handler(){this.activeGroup=0},deep:!0},"$store.state.currentAccount"(e){e&&this.getUserFavorites()}},created(){this.init()},methods:{init(){this.$store.dispatch("getUserTokenFavoriteGroups"),this.getUserFavorites()},async getUserFavorites(){this.favoritesList=(await d(this.activeGroup).catch((async()=>[]))).map((e=>{return n=((e,t)=>{for(var i in t||(t={}))a.call(t,i)&&l(e,i,t[i]);if(s)for(var i of s(t))o.call(t,i)&&l(e,i,t[i]);return e})({},e),r={id:e.token+"-"+e.chain,address:e.token,network:e.chain,priceChange24h:(null==e?void 0:e.price_change)?(null==e?void 0:e.price_change)/100:0,priceUSD:(null==e?void 0:e.current_price_usd)||0},t(n,i(r));var n,r}))},switchGroup(e){this.selectedToken=e,this.visible1=!0},tokenSetTop(e,t){if(0===t)return;let i=this.$toast.loading({forbidClick:!0,duration:0});h(e.token+"-"+e.chain,this.activeGroup).then((e=>{e?(this.getUserFavorites(),this.$notify({type:"success",message:this.$t("success")})):this.$notify({type:"danger",message:this.$t("fail")})})).catch((()=>{this.$notify({type:"danger",message:this.$t("fail")})})).finally((()=>{i.clear()}))},changeFavoritesIndex(e,t,i){if(!this.$f.verifyLogin())return;let s=e.token+"-"+e.chain,a=t+i;if(a<0||a+1>this.favoritesList.length)return;let o=this.favoritesList[a],l=o.token+"-"+o.chain,n=this.$toast.loading({forbidClick:!0,duration:0});u(s,l,this.activeGroup).then((e=>{e?(this.getUserFavorites(),this.$notify({type:"success",message:this.$t("success")})):this.$notify({type:"danger",message:this.$t("fail")})})).catch((e=>{console.log(e),this.$notify({type:"danger",message:this.$t("fail")})})).finally((()=>{n.clear()}))},confirmSwitchGroup(e){if(this.$f.verifyLogin())if(this.activeGroup!==e){let t=this.$toast.loading({forbidClick:!0,duration:0});p(this.selectedToken.token+"-"+this.selectedToken.chain,e).then((e=>{e?(this.getUserFavorites(),this.$store.dispatch("getUserFavorites"),this.$notify({type:"success",message:this.$t("success")}),this.visible1=!1):this.$notify({type:"danger",message:this.$t("fail")})})).catch((e=>{console.log(e),this.$notify({type:"danger",message:this.$t("fail")})})).finally((()=>{t.clear()}))}else this.visible1=!1},addFavoriteGroup(e){if(!this.$f.verifyLogin())return;let t=this.$toast.loading({forbidClick:!0,duration:0});r(e).then((e=>{e?(this.$store.dispatch("getUserTokenFavoriteGroups"),this.$notify({type:"success",message:this.$t("success")}),this.visible2=!1):this.$notify({type:"danger",message:this.$t("fail")})})).catch((e=>{console.log(e),this.$notify({type:"danger",message:this.$t("fail")})})).finally((()=>{t.clear()}))},removeFavoriteGroup(e){this.$f.verifyLogin()&&this.$dialog.confirm({title:this.$t("tips"),message:this.$t("removeFavGroupTips"),confirmButtonText:this.$t("confirm"),cancelButtonText:this.$t("cancel")}).then((()=>{let t=this.$toast.loading({forbidClick:!0,duration:0});v(e.group_id).then((e=>{e?(this.$store.dispatch("getUserTokenFavoriteGroups"),this.getUserFavorites(),this.$notify({type:"success",message:this.$t("success")}),this.visible2=!1):this.$notify({type:"danger",message:this.$t("fail")})})).catch((e=>{console.log(e),this.$notify({type:"danger",message:this.$t("fail")})})).finally((()=>{t.clear()}))})).catch((()=>{}))},setTopFavoriteGroup(e,t){if(!this.$f.verifyLogin())return;if(0===t)return;let i=this.$toast.loading({forbidClick:!0,duration:0});m(e.group_id).then((e=>{e?(this.$store.dispatch("getUserTokenFavoriteGroups"),this.$notify({type:"success",message:this.$t("success")})):this.$notify({type:"danger",message:this.$t("fail")})})).catch((()=>{this.$notify({type:"danger",message:this.$t("fail")})})).finally((()=>{i.clear()}))},changeIndexFavoriteGroup(e,t,i){if(!this.$f.verifyLogin())return;let s=e.group_id,a=t+i;if(a<0||a+1>this.groups.length)return;let o=this.groups[a].group_id,l=this.$toast.loading({forbidClick:!0,duration:0});f(s,o).then((e=>{e?(this.$store.dispatch("getUserTokenFavoriteGroups"),this.visible3=!1,this.$notify({type:"success",message:this.$t("success")})):this.$notify({type:"danger",message:this.$t("fail")})})).catch((e=>{console.log(e),this.$notify({type:"danger",message:this.$t("fail")})})).finally((()=>{l.clear()}))},rename(e){this.curGroup=e,this.visible3=!0},changeFavoriteGroupName(e){if(!this.$f.verifyLogin())return;let t=this.$toast.loading({forbidClick:!0,duration:0});g(e,this.curGroup.group_id).then((e=>{e?(this.$store.dispatch("getUserTokenFavoriteGroups"),this.visible3=!1,this.$notify({type:"success",message:this.$t("success")})):this.$notify({type:"danger",message:this.$t("fail")})})).catch((e=>{console.log(e),this.$notify({type:"danger",message:this.$t("fail")})})).finally((()=>{t.clear()}))},select(e){this.activeType=e.value},handleEditRemark(e){this.curRemark=e.remark||"",this.curToken=e,this.visible4=!0},confirmEditRemark(e){if(!this.$f.verifyLogin())return;let t=this.$toast.loading({forbidClick:!0,duration:0}),i=this.curToken.token+"-"+this.curToken.chain;b(i,e).then((e=>{e?(this.getUserFavorites(),this.visible4=!1,this.$notify({type:"success",message:this.$t("success")})):this.$notify({type:"danger",message:this.$t("fail")})})).catch((e=>{console.log(e),this.$notify({type:"danger",message:this.$t("fail")})})).finally((()=>{t.clear()}))}}},[["render",function(e,t,i,s,a,o){var l;const n=S("van-tab"),r=S("van-tabs"),c=S("van-image"),d=S("DynamicScrollerItem"),h=S("DynamicScroller"),u=S("van-empty"),p=S("van-icon"),v=S("van-cell"),m=S("ChangeGroup"),f=S("ChangeName"),g=S("EditRemark"),b=S("van-action-sheet");return U(),V(D,null,["1"===i.active?(U(),V("section",ie,[L("div",se,[I(r,{class:"fav-tabs",active:a.activeGroup,"onUpdate:active":t[0]||(t[0]=e=>a.activeGroup=e),border:"",color:"#558BED",ellipsis:!1,background:"transparent"},{default:x((()=>[I(n,{title:e.$t("defaultGroup"),name:0},null,8,["title"]),(U(!0),V(D,null,E(o.groups,((e,t)=>(U(),N(n,{key:t,title:e.name,name:e.group_id},null,8,["title","name"])))),128))])),_:1},8,["active"])]),L("ul",ae,[L("li",oe,[L("div",le,R(e.$t("token")),1),L("div",ne,R(e.$t("changeGroup")),1),L("div",re,R(e.$t("sort")),1),L("div",ce,R(e.$t("remark")),1)]),(null==(l=a.favoritesList)?void 0:l.length)>0?(U(),N(h,{key:0,items:a.favoritesList,"min-item-size":30,"page-mode":"",class:"scroller"},{default:x((({item:t,index:i,active:s})=>[I(d,{item:t,active:s,"data-index":i},{default:x((()=>[L("li",de,[L("div",he,[L("div",ue,[(U(),N(c,{key:t.token+t.chain,round:"",width:"0.5rem",height:"0.5rem","icon-size":"0.5rem","lazy-load":"","show-loading":"",src:e.$f.formatIcon(t),"error-icon":e.iconDefault},null,8,["src","error-icon"])),(U(),V("svg",pe,[L("use",{"xlink:href":`#icon-${t.chain}`},null,8,ve)]))]),L("span",me,R(t.symbol),1)]),L("div",fe,[L("i",{class:"iconfont icon-tiaozhengzu",onClick:O((e=>o.switchGroup(t)),["stop"])},null,8,ge)]),L("div",be,[L("i",{class:j(["iconfont icon-zhiding",{disabled:0===i}]),onClick:O((e=>o.tokenSetTop(t,i)),["stop"])},null,10,ye),L("i",{class:j(["iconfont icon-shangyi",{disabled:0===i}]),onClick:O((e=>o.changeFavoritesIndex(t,i,-1)),["stop"])},null,10,$e),L("i",{class:j(["iconfont icon-xiayi",{disabled:i+1===a.favoritesList.length}]),onClick:O((e=>o.changeFavoritesIndex(t,i,1)),["stop"])},null,10,ke)]),L("div",Ge,[L("i",{class:"iconfont icon-zhongmingming",onClick:O((e=>o.handleEditRemark(t)),["stop"])},null,8,_e)])])])),_:2},1032,["item","active","data-index"])])),_:1},8,["items"])):B("",!0),M(I(u,{class:"empty",image:e.emptyNoDataLight,description:e.$t("emptyData")},null,8,["image","description"]),[[P,a.favoritesList&&0===a.favoritesList.length||!o.groups]])])])):"2"===i.active?(U(),V("section",Ce,[I(v,{title:"",onClick:t[1]||(t[1]=e=>a.visible2=!0),clickable:""},{value:x((()=>[I(p,{class:"icon-add-o",name:"add-o"}),L("span",Fe,R(e.$t("newGroup")),1)])),_:1}),L("ul",we,[L("li",Te,[L("div",Se,R(e.$t("groupName")),1),L("div",Ue,R(e.$t("rename")),1),L("div",Ne,R(e.$t("sort")),1),L("div",xe,R(e.$t("operate")),1)]),(U(!0),V(D,null,E(o.groups,((e,t)=>(U(),V("li",{key:t,class:"table-item"},[L("div",Le,R(e.name),1),L("div",Re,[L("i",{class:"iconfont icon-zhongmingming",onClick:O((t=>o.rename(e)),["stop"])},null,8,Ie)]),L("div",ze,[L("i",{class:j(["iconfont icon-zhiding",{disabled:0===t}]),onClick:O((i=>o.setTopFavoriteGroup(e,t)),["stop"])},null,10,Ve),L("i",{class:j(["iconfont icon-shangyi",{disabled:0===t}]),onClick:O((i=>o.changeIndexFavoriteGroup(e,t,-1)),["stop"])},null,10,De),L("i",{class:j(["iconfont icon-xiayi",{disabled:t+1===o.groups.length}]),onClick:O((i=>o.changeIndexFavoriteGroup(e,t,1)),["stop"])},null,10,Ee)]),L("div",Be,[L("i",{class:"iconfont icon-ashbin",onClick:O((t=>o.removeFavoriteGroup(e)),["stop"])},null,8,Oe)])])))),128)),M(I(u,{class:"empty",image:e.emptyNoDataLight,description:e.$t("emptyData")},null,8,["image","description"]),[[P,o.groups&&0===o.groups.length||!o.groups]])])])):B("",!0),I(m,{visible:a.visible1,"onUpdate:visible":t[2]||(t[2]=e=>a.visible1=e),selected:a.activeGroup,"onUpdate:selected":t[3]||(t[3]=e=>a.activeGroup=e),title:e.$t("pleaseSelectGroup"),groups:o.groups,onSelect:o.confirmSwitchGroup},null,8,["visible","selected","title","groups","onSelect"]),I(f,{visible:a.visible2,"onUpdate:visible":t[4]||(t[4]=e=>a.visible2=e),confirmSubmit:o.addFavoriteGroup},null,8,["visible","confirmSubmit"]),I(f,{visible:a.visible3,"onUpdate:visible":t[5]||(t[5]=e=>a.visible3=e),confirmSubmit:o.changeFavoriteGroupName},null,8,["visible","confirmSubmit"]),I(g,{visible:a.visible4,"onUpdate:visible":t[6]||(t[6]=e=>a.visible4=e),initRemark:a.curRemark,confirmSubmit:o.confirmEditRemark},null,8,["visible","initRemark","confirmSubmit"]),I(b,{show:a.show,"onUpdate:show":t[7]||(t[7]=e=>a.show=e),actions:a.actions,"cancel-text":e.$t("cancel"),onSelect:o.select,"close-on-click-action":""},null,8,["show","actions","cancel-text","onSelect"])],64)}],["__scopeId","data-v-04019b83"]]);const Me={key:0},Pe={class:"fav-tabs-container"},Ae={class:"table-list"},qe={class:"table-item table-header"},Je={class:"table-item_d"},He={class:"table-item_d"},Ke={class:"table-item_d"},Qe={class:"table-item_d"},We={class:"table-item"},Xe={class:"token-info table-item_d"},Ye={class:"icon-token-container"},Ze={class:"token-symbol"},et={class:"table-item_d"},tt=["onClick"],it={class:"table-item_d token-sort"},st=["onClick"],at=["onClick"],ot=["onClick"],lt={class:"table-item_d"},nt=["onClick"],rt={key:1},ct={class:"add-text"},dt={class:"table-list"},ht={class:"table-item table-header"},ut={class:"table-item_d"},pt={class:"table-item_d"},vt={class:"table-item_d"},mt={class:"table-item_d"},ft={class:"table-item_d"},gt={class:"table-item_d"},bt=["onClick"],yt={class:"table-item_d"},$t=["onClick"],kt=["onClick"],Gt=["onClick"],_t={class:"table-item_d"},Ct=["onClick"];var Ft=n({name:"NftFavoriteManage",props:{active:{type:String,default:"1"},activeType:{type:String,default:"1"}},components:{ChangeGroup:X,ChangeName:K,EditRemark:te},data:()=>({activeGroup:0,visible1:!1,visible2:!1,visible3:!1,visible4:!1,selectedToken:{},favoritesList:[],curGroup:{},show:!1,actions:[{name:"Token",value:"1"},{name:"NFT",value:"2"}],curRemark:"",curToken:{}}),computed:{groups(){return this.$store.state.userNftFavoriteGroups},activeName(){let e={1:"Token",2:"NFT"};return(null==e?void 0:e[this.activeType])||"Token"}},watch:{activeType(e){"2"===e&&this.getUserFavorites()},activeGroup(){this.getUserFavorites()},groups:{handler(){this.activeGroup=0},deep:!0},"$store.state.currentAccount"(e){e&&this.getUserFavorites()}},created(){this.init()},methods:{init(){this.$store.dispatch("getUserNftFavoriteGroups"),this.getUserFavorites()},async getUserFavorites(){this.favoritesList=await y(this.activeGroup).catch((async()=>[]))},switchGroup(e){this.selectedToken=e,this.visible1=!0},tokenSetTop(e,t){if(0===t)return;let i=this.$toast.loading({forbidClick:!0,duration:0});$(e._id,this.activeGroup).then((e=>{e?(this.getUserFavorites(),this.$notify({type:"success",message:this.$t("success")})):this.$notify({type:"danger",message:this.$t("fail")})})).catch((()=>{this.$notify({type:"danger",message:this.$t("fail")})})).finally((()=>{i.clear()}))},changeNftFavoritesIndex(e,t,i){if(!this.$f.verifyLogin())return;let s=e._id,a=t+i;if(a<0||a+1>this.favoritesList.length)return;let o=this.favoritesList[a]._id,l=this.$toast.loading({forbidClick:!0,duration:0});k(s,o,this.activeGroup).then((e=>{e?(this.getUserFavorites(),this.$notify({type:"success",message:this.$t("success")})):this.$notify({type:"danger",message:this.$t("fail")})})).catch((e=>{console.log(e),this.$notify({type:"danger",message:this.$t("fail")})})).finally((()=>{l.clear()}))},confirmSwitchGroup(e){if(this.$f.verifyLogin())if(this.activeGroup!==e){let t=this.$toast.loading({forbidClick:!0,duration:0});G(this.selectedToken._id,e).then((e=>{e?(this.getUserFavorites(),this.$store.dispatch("getUserFavorites"),this.$notify({type:"success",message:this.$t("success")}),this.visible1=!1):this.$notify({type:"danger",message:this.$t("fail")})})).catch((e=>{console.log(e),this.$notify({type:"danger",message:this.$t("fail")})})).finally((()=>{t.clear()}))}else this.visible1=!1},addNftFavoriteGroup(e){if(!this.$f.verifyLogin())return;let t=this.$toast.loading({forbidClick:!0,duration:0});c(e).then((e=>{e?(this.$store.dispatch("getUserNftFavoriteGroups"),this.$notify({type:"success",message:this.$t("success")}),this.visible2=!1):this.$notify({type:"danger",message:this.$t("fail")})})).catch((e=>{console.log(e),this.$notify({type:"danger",message:this.$t("fail")})})).finally((()=>{t.clear()}))},removeNftFavoriteGroup(e){this.$f.verifyLogin()&&this.$dialog.confirm({title:this.$t("tips"),message:this.$t("removeFavGroupTips"),confirmButtonText:this.$t("confirm"),cancelButtonText:this.$t("cancel")}).then((()=>{let t=this.$toast.loading({forbidClick:!0,duration:0});_(e.group_id).then((e=>{e?(this.$store.dispatch("getUserNftFavoriteGroups"),this.getUserFavorites(),this.$notify({type:"success",message:this.$t("success")}),this.visible2=!1):this.$notify({type:"danger",message:this.$t("fail")})})).catch((e=>{console.log(e),this.$notify({type:"danger",message:this.$t("fail")})})).finally((()=>{t.clear()}))})).catch((()=>{}))},setTopNftFavoriteGroup(e,t){if(!this.$f.verifyLogin())return;if(0===t)return;let i=this.$toast.loading({forbidClick:!0,duration:0});C(e.group_id).then((e=>{e?(this.$store.dispatch("getUserNftFavoriteGroups"),this.$notify({type:"success",message:this.$t("success")})):this.$notify({type:"danger",message:this.$t("fail")})})).catch((()=>{this.$notify({type:"danger",message:this.$t("fail")})})).finally((()=>{i.clear()}))},changeIndexNftFavoriteGroup(e,t,i){if(!this.$f.verifyLogin())return;let s=e.group_id,a=t+i;if(a<0||a+1>this.groups.length)return;let o=this.groups[a].group_id,l=this.$toast.loading({forbidClick:!0,duration:0});F(s,o).then((e=>{e?(this.$store.dispatch("getUserNftFavoriteGroups"),this.visible3=!1,this.$notify({type:"success",message:this.$t("success")})):this.$notify({type:"danger",message:this.$t("fail")})})).catch((e=>{console.log(e),this.$notify({type:"danger",message:this.$t("fail")})})).finally((()=>{l.clear()}))},rename(e){this.curGroup=e,this.visible3=!0},changeNftFavoriteGroupName(e){if(!this.$f.verifyLogin())return;let t=this.$toast.loading({forbidClick:!0,duration:0});w(e,this.curGroup.group_id).then((e=>{e?(this.$store.dispatch("getUserNftFavoriteGroups"),this.visible3=!1,this.$notify({type:"success",message:this.$t("success")})):this.$notify({type:"danger",message:this.$t("fail")})})).catch((e=>{console.log(e),this.$notify({type:"danger",message:this.$t("fail")})})).finally((()=>{t.clear()}))},select(e){this.activeType=e.value},handleEditRemark(e){this.curRemark=e.remark||"",this.curToken=e,this.visible4=!0},confirmEditRemark(e){if(!this.$f.verifyLogin())return;let t=this.$toast.loading({forbidClick:!0,duration:0});T(this.curToken._id,e).then((e=>{e?(this.getUserFavorites(),this.visible4=!1,this.$notify({type:"success",message:this.$t("success")})):this.$notify({type:"danger",message:this.$t("fail")})})).catch((e=>{console.log(e),this.$notify({type:"danger",message:this.$t("fail")})})).finally((()=>{t.clear()}))}}},[["render",function(e,t,i,s,a,o){var l;const n=S("van-tab"),r=S("van-tabs"),c=S("van-image"),d=S("DynamicScrollerItem"),h=S("DynamicScroller"),u=S("van-empty"),p=S("van-icon"),v=S("van-cell"),m=S("ChangeGroup"),f=S("ChangeName"),g=S("EditRemark");return U(),V(D,null,["1"===i.active?(U(),V("section",Me,[L("div",Pe,[I(r,{class:"fav-tabs",active:a.activeGroup,"onUpdate:active":t[0]||(t[0]=e=>a.activeGroup=e),border:"",color:"#558BED",ellipsis:!1,background:"transparent"},{default:x((()=>[I(n,{title:e.$t("defaultGroup"),name:0},null,8,["title"]),(U(!0),V(D,null,E(o.groups,((e,t)=>(U(),N(n,{key:t,title:e.name,name:e.group_id},null,8,["title","name"])))),128))])),_:1},8,["active"])]),L("ul",Ae,[L("li",qe,[L("div",Je,R(e.$t("token")),1),L("div",He,R(e.$t("changeGroup")),1),L("div",Ke,R(e.$t("sort")),1),L("div",Qe,R(e.$t("remark")),1)]),(null==(l=a.favoritesList)?void 0:l.length)>0?(U(),N(h,{key:0,items:a.favoritesList,"min-item-size":30,keyField:"_id","page-mode":"",class:"scroller"},{default:x((({item:t,index:i,active:s})=>[I(d,{item:t,active:s,"data-index":i},{default:x((()=>[L("li",We,[L("div",Xe,[L("div",Ye,[I(c,{round:"",width:"0.72rem",height:"0.72rem","icon-size":"0.72rem","lazy-load":"","show-loading":"",src:null==t?void 0:t.logo,"error-icon":e.iconDefault},null,8,["src","error-icon"])]),L("span",Ze,R((null==t?void 0:t.name)||""),1)]),L("div",et,[L("i",{class:"iconfont icon-tiaozhengzu",onClick:O((e=>o.switchGroup(t)),["stop"])},null,8,tt)]),L("div",it,[L("i",{class:j(["iconfont icon-zhiding",{disabled:0===i}]),onClick:O((e=>o.tokenSetTop(t,i)),["stop"])},null,10,st),L("i",{class:j(["iconfont icon-shangyi",{disabled:0===i}]),onClick:O((e=>o.changeNftFavoritesIndex(t,i,-1)),["stop"])},null,10,at),L("i",{class:j(["iconfont icon-xiayi",{disabled:i+1===a.favoritesList.length}]),onClick:O((e=>o.changeNftFavoritesIndex(t,i,1)),["stop"])},null,10,ot)]),L("div",lt,[L("i",{class:"iconfont icon-zhongmingming",onClick:O((e=>o.handleEditRemark(t)),["stop"])},null,8,nt)])])])),_:2},1032,["item","active","data-index"])])),_:1},8,["items"])):B("",!0),M(I(u,{class:"empty",image:e.emptyNoDataLight,description:e.$t("emptyData")},null,8,["image","description"]),[[P,a.favoritesList&&0===a.favoritesList.length||!o.groups]])])])):"2"===i.active?(U(),V("section",rt,[I(v,{title:"",onClick:t[1]||(t[1]=e=>a.visible2=!0),clickable:""},{value:x((()=>[I(p,{class:"icon-add-o",name:"add-o"}),L("span",ct,R(e.$t("newGroup")),1)])),_:1}),L("ul",dt,[L("li",ht,[L("div",ut,R(e.$t("groupName")),1),L("div",pt,R(e.$t("rename")),1),L("div",vt,R(e.$t("sort")),1),L("div",mt,R(e.$t("operate")),1)]),(U(!0),V(D,null,E(o.groups,((e,t)=>(U(),V("li",{key:t,class:"table-item"},[L("div",ft,R(e.name),1),L("div",gt,[L("i",{class:"iconfont icon-zhongmingming",onClick:O((t=>o.rename(e)),["stop"])},null,8,bt)]),L("div",yt,[L("i",{class:j(["iconfont icon-zhiding",{disabled:0===t}]),onClick:O((i=>o.setTopNftFavoriteGroup(e,t)),["stop"])},null,10,$t),L("i",{class:j(["iconfont icon-shangyi",{disabled:0===t}]),onClick:O((i=>o.changeIndexNftFavoriteGroup(e,t,-1)),["stop"])},null,10,kt),L("i",{class:j(["iconfont icon-xiayi",{disabled:t+1===o.groups.length}]),onClick:O((i=>o.changeIndexNftFavoriteGroup(e,t,1)),["stop"])},null,10,Gt)]),L("div",_t,[L("i",{class:"iconfont icon-ashbin",onClick:O((t=>o.removeNftFavoriteGroup(e)),["stop"])},null,8,Ct)])])))),128)),M(I(u,{class:"empty",image:e.emptyNoDataLight,description:e.$t("emptyData")},null,8,["image","description"]),[[P,o.groups&&0===o.groups.length||!o.groups]])])])):B("",!0),I(m,{visible:a.visible1,"onUpdate:visible":t[2]||(t[2]=e=>a.visible1=e),selected:a.activeGroup,"onUpdate:selected":t[3]||(t[3]=e=>a.activeGroup=e),title:e.$t("pleaseSelectGroup"),groups:o.groups,onSelect:o.confirmSwitchGroup},null,8,["visible","selected","title","groups","onSelect"]),I(f,{visible:a.visible2,"onUpdate:visible":t[4]||(t[4]=e=>a.visible2=e),confirmSubmit:o.addNftFavoriteGroup},null,8,["visible","confirmSubmit"]),I(f,{visible:a.visible3,"onUpdate:visible":t[5]||(t[5]=e=>a.visible3=e),confirmSubmit:o.changeNftFavoriteGroupName},null,8,["visible","confirmSubmit"]),I(g,{visible:a.visible4,"onUpdate:visible":t[6]||(t[6]=e=>a.visible4=e),initRemark:a.curRemark,confirmSubmit:o.confirmEditRemark},null,8,["visible","initRemark","confirmSubmit"])],64)}],["__scopeId","data-v-5387281e"]]);var wt=n({name:"FavoriteManage",data(){return{active:this.$route.params.id||"1",activeType:this.$route.params.type||"1",show:!1,actions:[{name:"Token",value:"1"},{name:"NFT",value:"2"}]}},computed:{curComponent(){return"2"===this.activeType?Ft:je},activeName(){let e={1:"Token",2:"NFT"};return(null==e?void 0:e[this.activeType])||"Token"}},methods:{select(e){this.activeType=e.value},back(){var e,t,i;(null==(e=null==window?void 0:window.main)?void 0:e.back)?null==(i=null==(t=null==window?void 0:window.main)?void 0:t.back)||i.call(t):this.$router.go(-1)}}},[["render",function(e,t,i,s,a,o){const l=S("van-tab"),n=S("van-tabs"),r=S("van-icon"),c=S("van-nav-bar"),d=S("van-action-sheet");return U(),V(D,null,[I(c,{"left-text":"","left-arrow":"",onClickLeft:o.back,fixed:"",placeholder:"","safe-area-inset-top":"","z-index":"2"},{title:x((()=>[I(n,{class:"tab-top",active:a.active,"onUpdate:active":t[0]||(t[0]=e=>a.active=e),type:"card",color:"#fff",background:"#2C3254","title-active-color":"#878FBC","title-inactive-color":"#878FBC"},{default:x((()=>[I(l,{title:e.$t("favoriteManage"),name:"1"},null,8,["title"]),I(l,{title:e.$t("groupManage"),name:"2"},null,8,["title"])])),_:1},8,["active"])])),right:x((()=>[L("button",{class:"select-btn",onClick:t[1]||(t[1]=O((e=>a.show=!0),["stop"]))},[z(R(o.activeName)+" ",1),I(r,{name:"arrow-down"})])])),_:1},8,["onClickLeft"]),(U(),N(A(o.curComponent),{activeType:a.activeType,active:a.active},null,8,["activeType","active"])),I(d,{show:a.show,"onUpdate:show":t[2]||(t[2]=e=>a.show=e),actions:a.actions,"cancel-text":e.$t("cancel"),onSelect:o.select,"close-on-click-action":""},null,8,["show","actions","cancel-text","onSelect"])],64)}],["__scopeId","data-v-3bb63cbc"]]);export{wt as default};
