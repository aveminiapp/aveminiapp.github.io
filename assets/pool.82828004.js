var e=Object.defineProperty,t=Object.defineProperties,n=Object.getOwnPropertyDescriptors,i=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,l=(t,n,i)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[n]=i,s=(e,t)=>{for(var n in t||(t={}))o.call(t,n)&&l(e,n,t[n]);if(i)for(var n of i(t))a.call(t,n)&&l(e,n,t[n]);return e},r=(e,i)=>t(e,n(i));import{_ as c,N as d,w as h}from"./index.1c79211d.js";import{r as u,o as m,v as p,A as v,D as b,F as f,y as w,O as g,I as k,R as y,x as $,P as _,Q as x,w as N,c as S,G as L,J as C}from"./vendor.b97e4876.js";const P={name:"NewPair",props:{tableList:Array,loading:{type:Boolean,default:!1}},data:()=>({}),computed:{isLoading(){return this.loading}},methods:{tableRowClick(e){var t,n,i;(null==(t=null==window?void 0:window.main)?void 0:t.openMarket)?null==(i=null==(n=null==window?void 0:window.main)?void 0:n.openMarket)||i.call(n,e.target_token,e.chain):window.open("https://ave.ai/token/"+e.target_token+"-"+e.chain)}}},D=e=>(_("data-v-4563e7f0"),e=e(),x(),e),z={class:"table"},O={class:"table-list"},U={class:"table-item table-header"},V={class:"table-item_d"},B={class:"table-item_d"},j=D((()=>v("th",{class:"table-item_d th"},"AMM",-1))),M={class:"table-item_d"},E=["onClick"],I={class:"table-item_d symbol"},q={key:0},A={class:"main"},R=D((()=>v("br",null,null,-1))),T={class:"minor"},F={key:1},G={class:"main"},J=D((()=>v("br",null,null,-1))),Q={class:"minor"},H={class:"table-item_d"},K={class:"main"},W=D((()=>v("br",null,null,-1))),X={class:"minor"},Y={class:"main"},Z=D((()=>v("br",null,null,-1))),ee={class:"minor"},te={class:"table-item_d"},ne={class:"main"},ie=D((()=>v("br",null,null,-1))),oe={class:"icon-svg icon-symbol",style:{cursor:"default"},"aria-hidden":"true"},ae=["xlink:href"],le={class:"table-item_d"},se={class:"main"},re=D((()=>v("br",null,null,-1))),ce={class:"minor"};const de={style:{display:"flex","align-items":"center"}},he={class:"icon-svg icon-net-connect","aria-hidden":"true"},ue=["xlink:href"],me={class:"btn-content"},pe={class:"icon-svg icon-net-connect","aria-hidden":"true"},ve=["xlink:href"],be={style:{height:"50vh","overflow-y":"auto"}},fe={class:"icon-svg icon-net-connect","aria-hidden":"true"},we=["xlink:href"],ge={class:"popup-title"},ke={key:0,class:"icon-svg icon-net-connect","aria-hidden":"true"},ye=["xlink:href"],$e={class:"btn-content"};var _e=c({name:"Pool",components:{NewPairs:c(P,[["render",function(e,t,n,i,o,a){const l=u("van-empty");return m(),p("div",z,[v("table",O,[v("tr",U,[v("th",V,b(e.$t("poolPair")),1),v("th",B,b(e.$t("pairAmount")),1),j,v("th",M,b(e.$t("poolSize")),1)]),(m(!0),p(f,null,w(n.tableList,((t,n)=>(m(),p("tr",{class:"table-item",key:n,onClick:g((e=>a.tableRowClick(t)),["stop"])},[v("td",I,[t.target_token===t.token0_address?(m(),p("div",q,[v("span",A,b(t.token0_symbol),1),R,v("span",T,"/"+b(t.token1_symbol),1)])):(m(),p("div",F,[v("span",G,b(t.token1_symbol),1),J,v("span",Q,"/"+b(t.token0_symbol),1)]))]),v("td",H,[t.target_token===t.token0_address?(m(),p(f,{key:0},[v("span",K,b(e.$f.formatNumUnit(t.reserve0,2)),1),W,v("span",X,"/"+b(e.$f.formatNumUnit(t.reserve1,2)),1)],64)):(m(),p(f,{key:1},[v("span",Y,b(e.$f.formatNumUnit(t.reserve1,2)),1),Z,v("span",ee,"/"+b(e.$f.formatNumUnit(t.reserve0,2)),1)],64))]),v("td",te,[v("span",ne,b(t.amm),1),ie,(m(),p("svg",oe,[v("use",{"xlink:href":`#icon-${t.chain}`},null,8,ae)]))]),v("td",le,[v("span",se,"$"+b(t.target_token!==t.token0_address?e.$f.formatNumUnit(Math.round(t.reserve0*t.token0_price_usd*2)):e.$f.formatNumUnit(Math.round(t.reserve1*t.token1_price_usd*2))),1),re,v("span",ce,b(e.$dayjs(1e3*t.created_at).fromNow()),1)])],8,E)))),128))]),k($(l,{class:"empty",image:e.emptyNoDataLight,description:e.$t("empty")},null,8,["image","description"]),[[y,n.tableList&&0===n.tableList.length&&!a.isLoading]])])}],["__scopeId","data-v-4563e7f0"]])},data(){let e=Object.values(d);e=e.map((e=>r(s({},e),{amm:Object.keys(e.swapUrl)})));const t=e.reduce(((e,t)=>e.concat(t.amm)),[]);return{conditions:{pageNO:1,pageSize:15,sort:"created_at",direction:"desc",chain:"",amm:"",minPoolSize:1e5},initNetworkList:e,amms:t,tableData:[],loading:!1,total:1e3,show:!1,filterPopupVisible:!1,listLoading:!1,finished:!1,show1:!1,show2:!1,error:!1,poolSizeOption:[{text:"$10000",value:1e4},{text:"$100000",value:1e5},{text:"$500000",value:5e5},{text:"$1000000",value:1e6},{text:"$2000000",value:2e6}]}},computed:{networkList(){return[{netName:"",name:this.$t("allChain")},...this.initNetworkList]},ammList(){var e;let t=[];return t=this.conditions.chain?(null==(e=this.initNetworkList.find((e=>e.netName===this.conditions.chain)))?void 0:e.amm)||[]:this.amms,[{text:this.$t("allPool"),value:""}].concat(t.map((e=>({text:e,value:e}))))},chainName(){var e,t,n,i;return this.conditions.chain&&(null==(t=null==(e=d)?void 0:e[this.conditions.chain])?void 0:t.name)?null==(i=null==(n=d)?void 0:n[this.conditions.chain])?void 0:i.name:this.$t("allChain")},sortByList(){return[{name:this.$t("createdTime"),value:"created_at",color:"created_at"===this.conditions.sort?"#558BED":""},{name:this.$t("poolCirculatingSupply"),value:"poolSize",color:"poolSize"===this.conditions.sort?"#558BED":""}]},sortDirectionList(){return[{name:this.$t("ascending"),value:"asc",color:"asc"===this.conditions.direction?"#558BED":""},{name:this.$t("descending"),value:"desc",color:"desc"===this.conditions.direction?"#558BED":""}]},activeSort(){var e;return null==(e=this.sortByList.find((e=>e.value===this.conditions.sort)))?void 0:e.name},activeDirection(){var e;return null==(e=this.sortDirectionList.find((e=>e.value===this.conditions.direction)))?void 0:e.name}},activated(){this.getNewPairs()},methods:{query(){this.filterPopupVisible=!1,this.conditions.pageNO=1,this.tableData=[],this.finished=!1,this.error=!1,this.getNewPairs()},getNewPairs(){this.loading=!0,h(r(s({},this.conditions),{minPoolSize:Math.round(this.conditions.minPoolSize/2)})).then((e=>{this.total=e.total,this.tableData=this.tableData.concat(e.data),(this.tableData.length>=this.total||e.data.length<this.conditions.pageSize)&&(this.finished=!0)})).catch((()=>{this.error=!0})).finally((()=>{this.loading=!1}))},selectChain(e){this.show=!1,this.$refs.dropDownChain.toggle(!1),this.conditions.chain=e.netName,this.conditions.amm="",this.query()},onLoad(){this.conditions.pageNO++,this.getNewPairs()},onSelect1(e){this.conditions.sort=e.value,this.show1=!1},onSelect2(e){this.conditions.direction=e.value,this.show2=!1}}},[["render",function(e,t,n,i,o,a){const l=u("van-icon"),s=u("van-cell"),r=u("van-dropdown-item"),c=u("van-dropdown-menu"),d=u("new-pairs"),h=u("van-list"),k=u("van-action-sheet"),y=u("van-button"),_=u("van-field"),x=u("van-stepper"),P=u("van-form"),D=u("van-popup");return m(),p(f,null,[$(c,{"active-color":"#558BED",class:"filter-menu"},{default:N((()=>[$(r,{modelValue:o.conditions.chain,"onUpdate:modelValue":t[0]||(t[0]=e=>o.conditions.chain=e),teleport:"#app",ref:"dropDownChain"},{title:N((()=>[v("div",de,[(m(),p("svg",he,[v("use",{"xlink:href":`#icon-${o.conditions.chain}`},null,8,ue)])),v("span",me,b(a.chainName),1)])])),default:N((()=>[(m(!0),p(f,null,w(a.networkList,(t=>(m(),S(s,{key:t.netName,class:"list-item",onClick:g((e=>a.selectChain(t)),["stop"]),title:t.name,icon:e.$f.formatIcon(t),size:"large",clickable:"",center:""},{icon:N((()=>[(m(),p("svg",pe,[v("use",{"xlink:href":`#icon-${t.netName}`},null,8,ve)]))])),"right-icon":N((()=>[o.conditions.chain===t.netName?(m(),S(l,{key:0,color:"#558BED",name:"success"})):L("",!0)])),_:2},1032,["onClick","title","icon"])))),128))])),_:1},8,["modelValue"]),$(r,{modelValue:o.conditions.amm,"onUpdate:modelValue":t[1]||(t[1]=e=>o.conditions.amm=e),options:a.ammList,onChange:a.query},null,8,["modelValue","options","onChange"]),$(r,{modelValue:o.conditions.minPoolSize,"onUpdate:modelValue":t[2]||(t[2]=e=>o.conditions.minPoolSize=e),options:o.poolSizeOption,onChange:a.query},null,8,["modelValue","options","onChange"])])),_:1}),v("main",null,[$(h,{loading:o.loading,"onUpdate:loading":t[3]||(t[3]=e=>o.loading=e),finished:o.finished,error:o.error,"onUpdate:error":t[4]||(t[4]=e=>o.error=e),"error-text":e.$t("errorText"),onLoad:a.onLoad,"loading-text":e.$t("loading"),"finished-text":e.$t("noMore")},{default:N((()=>[$(d,{tableList:o.tableData,loading:o.loading},null,8,["tableList","loading"])])),_:1},8,["loading","finished","error","error-text","onLoad","loading-text","finished-text"]),$(k,{show:o.show,"onUpdate:show":t[5]||(t[5]=e=>o.show=e),"cancel-text":e.$t("cancel"),description:e.$t("selectChain"),teleport:"#app","close-on-click-action":""},{default:N((()=>[v("div",be,[(m(!0),p(f,null,w(a.networkList,(t=>(m(),S(s,{key:t.netName,class:"list-item",onClick:g((e=>a.selectChain(t)),["stop"]),title:t.name,icon:e.$f.formatIcon(t),value:t.netName,size:"large",clickable:""},{icon:N((()=>[(m(),p("svg",fe,[v("use",{"xlink:href":`#icon-${t.netName}`},null,8,we)]))])),_:2},1032,["onClick","title","icon","value"])))),128))])])),_:1},8,["show","cancel-text","description"]),$(D,{show:o.filterPopupVisible,"onUpdate:show":t[10]||(t[10]=e=>o.filterPopupVisible=e),class:"popup-container filter",closeable:!0,"close-on-click-overlay":!1,"close-on-popstate":!1,round:"",position:"center",teleport:"#app",style:{width:"90%"}},{default:N((()=>[v("h3",ge,b(e.$t("filterCriteria")),1),$(P,{class:"popup-content",ref:"form","validate-first":"",onSubmit:a.query,"input-align":"right"},{default:N((()=>[$(_,{label:"Chain",placeholder:"",readonly:""},{input:N((()=>[$(y,{plain:"",hairline:"",type:"primary",size:"small",onClick:t[6]||(t[6]=e=>o.show=!0)},{default:N((()=>[o.conditions.chain?(m(),p("svg",ke,[v("use",{"xlink:href":`#icon-${o.conditions.chain}`},null,8,ye)])):L("",!0),v("span",$e,b(a.chainName),1),$(l,{name:"arrow-down"})])),_:1})])),_:1}),$(_,{label:e.$t("minCirculatingSupply"),placeholder:"",readonly:""},{input:N((()=>[$(x,{modelValue:o.conditions.minPoolSize,"onUpdate:modelValue":t[7]||(t[7]=e=>o.conditions.minPoolSize=e),"input-width":"80px",min:1e5,step:1e4},null,8,["modelValue"])])),_:1},8,["label"]),$(_,{label:e.$t("sortBy"),placeholder:"",readonly:"",clickable:"","right-icon":"arrow-down","model-value":a.activeSort,onClick:t[8]||(t[8]=g((e=>o.show1=!0),["stop"]))},null,8,["label","model-value"]),$(_,{label:e.$t("sortDirection"),placeholder:"",readonly:"",clickable:"","right-icon":"arrow-down","model-value":a.activeDirection,onClick:t[9]||(t[9]=g((e=>o.show2=!0),["stop"]))},null,8,["label","model-value"]),$(y,{class:"sumbit-btn",round:"",block:"",type:"primary","native-type":"submit"},{default:N((()=>[C(b(e.$t("search")),1)])),_:1})])),_:1},8,["onSubmit"])])),_:1},8,["show"]),$(k,{show:o.show1,"onUpdate:show":t[11]||(t[11]=e=>o.show1=e),"cancel-text":e.$t("cancel"),description:e.$t("sortBy"),teleport:"#app","close-on-click-action":"",actions:a.sortByList,onSelect:a.onSelect1},null,8,["show","cancel-text","description","actions","onSelect"]),$(k,{show:o.show2,"onUpdate:show":t[12]||(t[12]=e=>o.show2=e),"cancel-text":e.$t("cancel"),description:e.$t("sortDirection"),teleport:"#app","close-on-click-action":"",actions:a.sortDirectionList,onSelect:a.onSelect2},null,8,["show","cancel-text","description","actions","onSelect"])])],64)}],["__scopeId","data-v-81366382"]]);export{_e as default};
