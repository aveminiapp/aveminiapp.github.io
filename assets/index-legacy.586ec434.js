!function(){var e=document.createElement("style");e.innerHTML=".popup-title[data-v-c915b360]{font-size:.32rem;text-align:center;margin-top:.1rem}.popup-content[data-v-c915b360]{padding:1rem 0 0;font-size:.28rem;line-height:1.5}.popup-content[data-v-c915b360] .van-field{background-color:#f8f8f8;border-radius:.16rem;padding:.4rem .32rem}.footer[data-v-c915b360]{display:flex;justify-content:center;align-items:center;margin-top:1rem}.footer .btn[data-v-c915b360]{min-width:2.4rem}.footer .btn+.btn[data-v-c915b360]{margin-left:.4rem}.confirm-box[data-v-091171da]{padding:0 .4rem;margin:1rem 0 .3rem}.input-remark[data-v-091171da] .van-field__body{border:.01rem solid #878fbc;border-radius:.1rem;padding:.1rem .2rem}.popup-title[data-v-79195c08]{font-size:.32rem;text-align:center;margin-top:.1rem}.popup-content[data-v-79195c08]{padding:1rem 0 0;font-size:.28rem;line-height:1.5}.popup-content[data-v-79195c08] .van-field{background-color:#f8f8f8;border-radius:.16rem;padding:.4rem .32rem}.footer[data-v-79195c08]{display:flex;justify-content:center;align-items:center;margin-top:1rem}.footer .btn[data-v-79195c08]{min-width:2.4rem}.footer .btn+.btn[data-v-79195c08]{margin-left:.4rem}.fav-tabs-container[data-v-9adc118e]{display:flex;align-items:center;justify-content:space-between}.fav-tabs[data-v-9adc118e]{max-width:100vw}.table-list[data-v-9adc118e]{font-size:.32rem;color:#1e2329;letter-spacing:0;font-weight:500;min-height:calc(100vh - 2.48rem);padding-bottom:.4rem}.table-list .table-item[data-v-9adc118e]{display:flex;align-items:center;padding:0 .2rem}.table-list .table-item:not(.table-header)+.table-item[data-v-9adc118e]{border-top:.02rem solid #F5F5F5}.table-list .table-item.table-header[data-v-9adc118e]{font-size:.24rem;color:#999;letter-spacing:0;text-align:center;font-weight:400}.table-list .table-item.table-header .table-item_d[data-v-9adc118e]{padding:.2rem 0}.table-list .table-item .table-item_d[data-v-9adc118e]{padding:.3rem 0}.table-list .table-item .table-item_d .iconfont[data-v-9adc118e]{font-size:.36rem;color:#888}.table-list .table-item .table-item_d .iconfont+.iconfont[data-v-9adc118e]{margin-left:.3rem}.table-list .table-item .table-item_d .iconfont[data-v-9adc118e]:active{opacity:.5}.table-list .table-item .table-item_d .iconfont.disabled[data-v-9adc118e]{opacity:.3}.table-list .table-item .table-item_d[data-v-9adc118e]:nth-child(1){flex:2.5;text-align:left;word-wrap:break-word}.table-list .table-item .table-item_d[data-v-9adc118e]:nth-child(2){flex:1.5;text-align:center}.table-list .table-item .table-item_d[data-v-9adc118e]:nth-child(3){flex:2;text-align:center}.table-list .table-item .table-item_d[data-v-9adc118e]:nth-child(4){flex:1;text-align:center}.table-list .token-info[data-v-9adc118e]{display:flex;align-items:center}.table-list .token-info .icon-collect[data-v-9adc118e]{font-size:.32rem;color:#ccc;cursor:pointer;margin-right:.1rem}.table-list .token-info .icon-collect.collected[data-v-9adc118e]{color:#558bed}.table-list .token-info .token-network[data-v-9adc118e]{border:.02rem solid #878fbc;border-radius:.2rem;font-size:.24rem;color:#878fbc;padding:.04rem .1rem;margin-left:.1rem}.table-list .token-info .token-icon[data-v-9adc118e]{margin-right:.18rem;border-radius:50%}.btn-add[data-v-9adc118e]{position:sticky;bottom:0;padding:.3rem .8rem;background-color:#fff;box-shadow:0 0 .2rem #eee}.btn-add .button[data-v-9adc118e]{border-radius:.16rem}.icon-add-o[data-v-9adc118e]{color:#558bed;margin-right:.1rem}.add-text[data-v-9adc118e]{color:#558bed}.select-btn[data-v-9adc118e]{background-color:transparent;color:#878fbc;border:none}.token-symbol[data-v-9adc118e]{word-wrap:break-word}.fav-tabs-container[data-v-ff4684f2]{display:flex;align-items:center;justify-content:space-between}.fav-tabs[data-v-ff4684f2]{max-width:100vw}.table-list[data-v-ff4684f2]{font-size:.32rem;color:#1e2329;letter-spacing:0;font-weight:500;min-height:calc(100vh - 2.48rem);padding-bottom:.4rem}.table-list .table-item[data-v-ff4684f2]{display:flex;align-items:center;padding:0 .2rem}.table-list .table-item:not(.table-header)+.table-item[data-v-ff4684f2]{border-top:.02rem solid #F5F5F5}.table-list .table-item.table-header[data-v-ff4684f2]{font-size:.24rem;color:#999;letter-spacing:0;text-align:center;font-weight:400}.table-list .table-item.table-header .table-item_d[data-v-ff4684f2]{padding:.2rem 0}.table-list .table-item .table-item_d[data-v-ff4684f2]{padding:.3rem 0}.table-list .table-item .table-item_d .iconfont[data-v-ff4684f2]{font-size:.36rem;color:#888}.table-list .table-item .table-item_d .iconfont+.iconfont[data-v-ff4684f2]{margin-left:.3rem}.table-list .table-item .table-item_d .iconfont[data-v-ff4684f2]:active{opacity:.5}.table-list .table-item .table-item_d .iconfont.disabled[data-v-ff4684f2]{opacity:.3}.table-list .table-item .table-item_d[data-v-ff4684f2]:nth-child(1){flex:2.5;text-align:left;word-wrap:break-word}.table-list .table-item .table-item_d[data-v-ff4684f2]:nth-child(2){flex:1.5;text-align:center}.table-list .table-item .table-item_d[data-v-ff4684f2]:nth-child(3){flex:2;text-align:center}.table-list .table-item .table-item_d[data-v-ff4684f2]:nth-child(4){flex:1;text-align:center}.table-list .token-info[data-v-ff4684f2]{display:flex;align-items:center}.table-list .token-info .icon-collect[data-v-ff4684f2]{font-size:.32rem;color:#ccc;cursor:pointer;margin-right:.1rem}.table-list .token-info .icon-collect.collected[data-v-ff4684f2]{color:#558bed}.table-list .token-info .token-network[data-v-ff4684f2]{border:.02rem solid #878fbc;border-radius:.2rem;font-size:.24rem;color:#878fbc;padding:.04rem .1rem;margin-left:.1rem}.table-list .token-info .token-icon[data-v-ff4684f2]{margin-right:.18rem;border-radius:50%}.btn-add[data-v-ff4684f2]{position:sticky;bottom:0;padding:.3rem .8rem;background-color:#fff;box-shadow:0 0 .2rem #eee}.btn-add .button[data-v-ff4684f2]{border-radius:.16rem}.icon-add-o[data-v-ff4684f2]{color:#558bed;margin-right:.1rem}.add-text[data-v-ff4684f2]{color:#558bed}.select-btn[data-v-ff4684f2]{background-color:transparent;color:#878fbc;border:none}.token-symbol[data-v-ff4684f2]{word-wrap:break-word;word-break:break-word}[data-v-3bb63cbc] .van-hairline--bottom:after{border-bottom:.02rem solid rgba(135,143,188,.3)}[data-v-3bb63cbc] .van-tabs--card .van-tabs__nav{border-color:#878fbc!important}[data-v-3bb63cbc] .van-tabs--card .van-tabs__nav .van-tab{padding:0 .3rem}[data-v-3bb63cbc] .van-nav-bar__title{max-width:85%}[data-v-3bb63cbc] .van-nav-bar__right{padding:0 .1rem}.select-btn[data-v-3bb63cbc]{background-color:transparent;color:#878fbc;border:none}\n",document.head.appendChild(e),System.register(["./index-legacy.e8044d4e.js","./vendor-legacy.e4966b6b.js"],(function(e){"use strict";var t,i,a,s,o,l,n,r,c,d,h,m,u,f,p,v,b,g,y,k,$,_,G,w,F,C,x,T,S,U,N,L,z,R,I,V,D,E;return{setters:[function(e){t=e._,i=e.c,a=e.d,s=e.g,o=e.e,l=e.f,n=e.m,r=e.r,c=e.h,d=e.i,h=e.j,m=e.k,u=e.l,f=e.n,p=e.o,v=e.p,b=e.q,g=e.t,y=e.u,k=e.v,$=e.w},function(e){_=e.r,G=e.o,w=e.c,F=e.w,C=e.A,x=e.D,T=e.x,S=e.H,U=e.v,N=e.F,L=e.y,z=e.G,R=e.M,I=e.O,V=e.J,D=e.P,E=e.k}],execute:function(){const B={name:"Rename",props:{visible:Boolean,confirmSubmit:Function},emits:["update:visible","onSubmit"],data(){return{title:"",rules:[{required:!0,message:this.$t("enterGroupName")},{validator:e=>(null==e?void 0:e.length)<=10,message:this.$t("maximum10characters")}]}},computed:{dialogVisible:{get(){return this.visible},set(e){this.$emit("update:visible",e)}}},watch:{visible(e){e&&(this.title="")}},methods:{onSubmit(){this.confirmSubmit(this.title)}}},j={class:"popup-title"},M={class:"footer"};var A=t(B,[["render",function(e,t,i,a,s,o){const l=_("van-field"),n=_("van-button"),r=_("van-form"),c=_("van-popup");return G(),w(c,{show:o.dialogVisible,"onUpdate:show":t[2]||(t[2]=e=>o.dialogVisible=e),class:"popup-container",closeable:!0,"close-on-click-overlay":!1,"close-on-popstate":!1,round:"",position:"center",teleport:"#app",style:{width:"90%"}},{default:F((()=>[C("h3",j,x(e.$t("enterGroupName")),1),T(r,{class:"popup-content",onSubmit:o.onSubmit},{default:F((()=>[T(l,{modelValue:s.title,"onUpdate:modelValue":t[0]||(t[0]=e=>s.title=e),label:"",placeholder:e.$t("maximum10characters"),clearable:"",rules:s.rules},null,8,["modelValue","placeholder","rules"]),C("div",M,[T(n,{class:"btn",type:"default",round:"",onClick:t[1]||(t[1]=e=>o.dialogVisible=!1)},{default:F((()=>[S(x(e.$t("cancel")),1)])),_:1}),T(n,{class:"btn","native-type":"submit",type:"primary",round:""},{default:F((()=>[S(x(e.$t("confirm1")),1)])),_:1})])])),_:1},8,["onSubmit"])])),_:1},8,["show"])}],["__scopeId","data-v-c915b360"]]);const q={name:"ChangeGroup",props:{visible:Boolean,title:{type:String,default:""},type:{type:String,default:"1"},isRemark:{type:Boolean,default:!1},selected:{type:[String,Number],default:0},groups:{type:Array,default:()=>[]}},components:{ChangeName:A},emits:["update:visible","update:selected","select"],data(){return{checked:this.initSelected,visible1:!1,remark:""}},computed:{show:{get(){return this.visible},set(e){this.$emit("update:visible",e)}},initSelected:{get(){return this.selected},set(e){this.$emit("update:selected",e)}}},watch:{show(e){e&&(this.checked=this.initSelected)}},methods:{select(){this.isRemark?this.$emit("select",this.checked,this.remark):this.$emit("select",this.checked)},addFavoriteGroup(e){"1"===this.type?this.addTokenFavoriteGroup(e):"2"===this.type&&this.addNftFavoriteGroup(e)},addTokenFavoriteGroup(e){if(!this.$f.verifyLogin())return;let t=this.$toast.loading({forbidClick:!0,duration:0});i(e).then((e=>{e?(this.$store.dispatch("getUserTokenFavoriteGroups"),this.$notify({type:"success",message:this.$t("success")}),this.visible1=!1):this.$notify({type:"danger",message:this.$t("fail")})})).catch((e=>{console.log(e),this.$notify({type:"danger",message:this.$t("fail")})})).finally((()=>{t.clear()}))},addNftFavoriteGroup(e){if(!this.$f.verifyLogin())return;let t=this.$toast.loading({forbidClick:!0,duration:0});a(e).then((e=>{e?(this.$store.dispatch("getUserNftFavoriteGroups"),this.$notify({type:"success",message:this.$t("success")}),this.visible1=!1):this.$notify({type:"danger",message:this.$t("fail")})})).catch((e=>{console.log(e),this.$notify({type:"danger",message:this.$t("fail")})})).finally((()=>{t.clear()}))}}},H={class:"confirm-box"};var J=t(q,[["render",function(e,t,i,a,s,o){const l=_("van-radio"),n=_("van-cell"),r=_("van-field"),c=_("van-cell-group"),d=_("van-radio-group"),h=_("van-button"),m=_("van-action-sheet"),u=_("ChangeName");return G(),U(N,null,[T(m,{show:o.show,"onUpdate:show":t[4]||(t[4]=e=>o.show=e),description:"",title:i.title,teleport:"#app"},{default:F((()=>[T(d,{modelValue:s.checked,"onUpdate:modelValue":t[3]||(t[3]=e=>s.checked=e)},{default:F((()=>[T(c,null,{default:F((()=>[T(n,{title:e.$t("defaultGroup"),clickable:"",onClick:t[0]||(t[0]=e=>s.checked=0)},{"right-icon":F((()=>[T(l,{name:0})])),_:1},8,["title"]),(G(!0),U(N,null,L(i.groups,((e,t)=>(G(),w(n,{key:t,title:e.name,clickable:"",onClick:t=>s.checked=e.group_id},{"right-icon":F((()=>[T(l,{name:e.group_id},null,8,["name"])])),_:2},1032,["title","onClick"])))),128)),T(n,{title:e.$t("newGroup"),onClick:t[1]||(t[1]=e=>s.visible1=!0),clickable:"",icon:"add-o"},null,8,["title"]),i.isRemark?(G(),w(r,{key:0,class:"input-remark",modelValue:s.remark,"onUpdate:modelValue":t[2]||(t[2]=e=>s.remark=e),rows:"1",autosize:"",label:"",type:"textarea",placeholder:e.$t("enterRemark")},null,8,["modelValue","placeholder"])):z("",!0)])),_:1})])),_:1},8,["modelValue"]),C("div",H,[T(h,{type:"primary",onClick:R(o.select,["stop"]),round:"",block:""},{default:F((()=>[S(x(e.$t("confirm1")),1)])),_:1},8,["onClick"])])])),_:1},8,["show","title"]),T(u,{visible:s.visible1,"onUpdate:visible":t[5]||(t[5]=e=>s.visible1=e),confirmSubmit:o.addFavoriteGroup},null,8,["visible","confirmSubmit"])],64)}],["__scopeId","data-v-091171da"]]);const O={name:"EditRemark",props:{visible:Boolean,confirmSubmit:Function,initRemark:String},emits:["update:visible","onSubmit"],data(){return{title:this.initRemark||"",rules:[{required:!0,message:this.$t("enterRemark")},{validator:e=>(null==e?void 0:e.length)<=50,message:this.$t("maximum50characters")}]}},computed:{dialogVisible:{get(){return this.visible},set(e){this.$emit("update:visible",e)}}},watch:{visible(e){e&&(this.title=this.initRemark||"")}},methods:{onSubmit(){this.confirmSubmit(this.title)}}},P={class:"popup-title"},K={class:"footer"};var Q=t(O,[["render",function(e,t,i,a,s,o){const l=_("van-field"),n=_("van-button"),r=_("van-form"),c=_("van-popup");return G(),w(c,{show:o.dialogVisible,"onUpdate:show":t[2]||(t[2]=e=>o.dialogVisible=e),class:"popup-container",closeable:!0,"close-on-click-overlay":!1,"close-on-popstate":!1,round:"",position:"center",teleport:"#app",style:{width:"90%"}},{default:F((()=>[C("h3",P,x(e.$t("editRemark")),1),T(r,{class:"popup-content",onSubmit:o.onSubmit},{default:F((()=>[T(l,{modelValue:s.title,"onUpdate:modelValue":t[0]||(t[0]=e=>s.title=e),label:"",placeholder:e.$t("maximum50characters"),clearable:"",rules:s.rules},null,8,["modelValue","placeholder","rules"]),C("div",K,[T(n,{class:"btn",type:"default",round:"",onClick:t[1]||(t[1]=e=>o.dialogVisible=!1)},{default:F((()=>[S(x(e.$t("cancel")),1)])),_:1}),T(n,{class:"btn","native-type":"submit",type:"primary",round:""},{default:F((()=>[S(x(e.$t("confirm1")),1)])),_:1})])])),_:1},8,["onSubmit"])])),_:1},8,["show"])}],["__scopeId","data-v-79195c08"]]);const W={name:"TokenFavoriteManage",props:{active:{type:String,default:"1"},activeType:{type:String,default:"1"}},components:{ChangeGroup:J,ChangeName:A,EditRemark:Q},data:()=>({activeGroup:0,visible1:!1,visible2:!1,visible3:!1,visible4:!1,selectedToken:{},favoritesList:[],curGroup:{},show:!1,actions:[{name:"Token",value:"1"},{name:"NFT",value:"2"}],curRemark:"",curToken:{}}),computed:{groups(){return this.$store.state.userFavoriteGroups}},watch:{activeType(e){"1"===e&&this.getUserFavorites()},activeGroup(){this.getUserFavorites()},groups:{handler(){this.activeGroup=0},deep:!0},"$store.state.currentAccount"(e){e&&this.getUserFavorites()}},created(){this.init()},methods:{init(){this.$store.dispatch("getUserTokenFavoriteGroups"),this.getUserFavorites()},async getUserFavorites(){this.favoritesList=(await s(this.activeGroup).catch((async()=>[]))).map((e=>({...e,id:e.token+"-"+e.chain,address:e.token,network:e.chain,priceChange24h:null!=e&&e.price_change?(null==e?void 0:e.price_change)/100:0,priceUSD:(null==e?void 0:e.current_price_usd)||0})))},switchGroup(e){this.selectedToken=e,this.visible1=!0},tokenSetTop(e,t){if(0===t)return;let i=this.$toast.loading({forbidClick:!0,duration:0});o(e.token+"-"+e.chain,this.activeGroup).then((e=>{this.getUserFavorites(),this.$notify({type:"success",message:this.$t("success")})})).catch((()=>{this.$notify({type:"danger",message:this.$t("fail")})})).finally((()=>{i.clear()}))},changeFavoritesIndex(e,t,i){if(!this.$f.verifyLogin())return;let a=e.token+"-"+e.chain,s=t+i;if(s<0||s+1>this.favoritesList.length)return;let o=this.favoritesList[s],n=o.token+"-"+o.chain,r=this.$toast.loading({forbidClick:!0,duration:0});l(a,n,this.activeGroup).then((e=>{e?(this.getUserFavorites(),this.$notify({type:"success",message:this.$t("success")})):this.$notify({type:"danger",message:this.$t("fail")})})).catch((e=>{console.log(e),this.$notify({type:"danger",message:this.$t("fail")})})).finally((()=>{r.clear()}))},confirmSwitchGroup(e){if(this.$f.verifyLogin())if(this.activeGroup!==e){let t=this.$toast.loading({forbidClick:!0,duration:0});n(this.selectedToken.token+"-"+this.selectedToken.chain,e).then((e=>{e?(this.getUserFavorites(),this.$store.dispatch("getUserFavorites"),this.$notify({type:"success",message:this.$t("success")}),this.visible1=!1):this.$notify({type:"danger",message:this.$t("fail")})})).catch((e=>{console.log(e),this.$notify({type:"danger",message:this.$t("fail")})})).finally((()=>{t.clear()}))}else this.visible1=!1},addFavoriteGroup(e){if(!this.$f.verifyLogin())return;let t=this.$toast.loading({forbidClick:!0,duration:0});i(e).then((e=>{e?(this.$store.dispatch("getUserTokenFavoriteGroups"),this.$notify({type:"success",message:this.$t("success")}),this.visible2=!1):this.$notify({type:"danger",message:this.$t("fail")})})).catch((e=>{console.log(e),this.$notify({type:"danger",message:this.$t("fail")})})).finally((()=>{t.clear()}))},removeFavoriteGroup(e){this.$f.verifyLogin()&&this.$dialog.confirm({title:this.$t("tips"),message:this.$t("removeFavGroupTips"),confirmButtonText:this.$t("confirm"),cancelButtonText:this.$t("cancel")}).then((()=>{let t=this.$toast.loading({forbidClick:!0,duration:0});r(e.group_id).then((e=>{e?(this.$store.dispatch("getUserTokenFavoriteGroups"),this.getUserFavorites(),this.$notify({type:"success",message:this.$t("success")}),this.visible2=!1):this.$notify({type:"danger",message:this.$t("fail")})})).catch((e=>{console.log(e),this.$notify({type:"danger",message:this.$t("fail")})})).finally((()=>{t.clear()}))})).catch((()=>{}))},setTopFavoriteGroup(e,t){if(!this.$f.verifyLogin())return;if(0===t)return;let i=this.$toast.loading({forbidClick:!0,duration:0});c(e.group_id).then((e=>{this.$store.dispatch("getUserTokenFavoriteGroups"),this.$notify({type:"success",message:this.$t("success")})})).catch((()=>{this.$notify({type:"danger",message:this.$t("fail")})})).finally((()=>{i.clear()}))},changeIndexFavoriteGroup(e,t,i){if(!this.$f.verifyLogin())return;let a=e.group_id,s=t+i;if(s<0||s+1>this.groups.length)return;let o=this.groups[s].group_id,l=this.$toast.loading({forbidClick:!0,duration:0});d(a,o).then((e=>{e?(this.$store.dispatch("getUserTokenFavoriteGroups"),this.visible3=!1,this.$notify({type:"success",message:this.$t("success")})):this.$notify({type:"danger",message:this.$t("fail")})})).catch((e=>{console.log(e),this.$notify({type:"danger",message:this.$t("fail")})})).finally((()=>{l.clear()}))},rename(e){this.curGroup=e,this.visible3=!0},changeFavoriteGroupName(e){if(!this.$f.verifyLogin())return;let t=this.$toast.loading({forbidClick:!0,duration:0});h(e,this.curGroup.group_id).then((e=>{e?(this.$store.dispatch("getUserTokenFavoriteGroups"),this.visible3=!1,this.$notify({type:"success",message:this.$t("success")})):this.$notify({type:"danger",message:this.$t("fail")})})).catch((e=>{console.log(e),this.$notify({type:"danger",message:this.$t("fail")})})).finally((()=>{t.clear()}))},select(e){this.activeType=e.value},handleEditRemark(e){this.curRemark=e.remark||"",this.curToken=e,this.visible4=!0},confirmEditRemark(e){if(!this.$f.verifyLogin())return;let t=this.$toast.loading({forbidClick:!0,duration:0}),i=this.curToken.token+"-"+this.curToken.chain;m(i,e).then((e=>{e?(this.getUserFavorites(),this.visible4=!1,this.$notify({type:"success",message:this.$t("success")})):this.$notify({type:"danger",message:this.$t("fail")})})).catch((e=>{console.log(e),this.$notify({type:"danger",message:this.$t("fail")})})).finally((()=>{t.clear()}))}}},X={key:0},Y={class:"fav-tabs-container"},Z={class:"table-list"},ee={class:"table-item table-header"},te={class:"table-item_d"},ie={class:"table-item_d"},ae={class:"table-item_d"},se={class:"table-item_d"},oe={class:"table-item"},le={class:"token-info table-item_d"},ne={class:"icon-token-container"},re={class:"icon-svg icon-network","aria-hidden":"true"},ce=["xlink:href"],de={class:"token-symbol"},he={class:"table-item_d"},me=["onClick"],ue={class:"table-item_d token-sort"},fe=["onClick"],pe=["onClick"],ve=["onClick"],be={class:"table-item_d"},ge=["onClick"],ye={key:1},ke={class:"add-text"},$e={class:"table-list"},_e={class:"table-item table-header"},Ge={class:"table-item_d"},we={class:"table-item_d"},Fe={class:"table-item_d"},Ce={class:"table-item_d"},xe={class:"table-item_d"},Te={class:"table-item_d"},Se=["onClick"],Ue={class:"table-item_d"},Ne=["onClick"],Le=["onClick"],ze=["onClick"],Re={class:"table-item_d"},Ie=["onClick"];var Ve=t(W,[["render",function(e,t,i,a,s,o){var l;const n=_("van-tab"),r=_("van-tabs"),c=_("van-image"),d=_("DynamicScrollerItem"),h=_("DynamicScroller"),m=_("van-empty"),u=_("van-icon"),f=_("van-cell"),p=_("ChangeGroup"),v=_("ChangeName"),b=_("EditRemark"),g=_("van-action-sheet");return G(),U(N,null,["1"===i.active?(G(),U("section",X,[C("div",Y,[T(r,{class:"fav-tabs",active:s.activeGroup,"onUpdate:active":t[0]||(t[0]=e=>s.activeGroup=e),border:"",color:"#558BED",ellipsis:!1,background:"transparent"},{default:F((()=>[T(n,{title:e.$t("defaultGroup"),name:0},null,8,["title"]),(G(!0),U(N,null,L(o.groups,((e,t)=>(G(),w(n,{key:t,title:e.name,name:e.group_id},null,8,["title","name"])))),128))])),_:1},8,["active"])]),C("ul",Z,[C("li",ee,[C("div",te,x(e.$t("token")),1),C("div",ie,x(e.$t("changeGroup")),1),C("div",ae,x(e.$t("sort")),1),C("div",se,x(e.$t("remark")),1)]),(null===(l=s.favoritesList)||void 0===l?void 0:l.length)>0?(G(),w(h,{key:0,items:s.favoritesList,"min-item-size":30,"page-mode":"",class:"scroller"},{default:F((({item:t,index:i,active:a})=>[T(d,{item:t,active:a,"data-index":i},{default:F((()=>[C("li",oe,[C("div",le,[C("div",ne,[(G(),w(c,{key:t.token+t.chain,round:"",width:"0.5rem",height:"0.5rem","icon-size":"0.5rem","lazy-load":"","show-loading":"",src:e.$f.formatIcon(t),"error-icon":e.iconDefault},null,8,["src","error-icon"])),(G(),U("svg",re,[C("use",{"xlink:href":`#icon-${t.chain}`},null,8,ce)]))]),C("span",de,x(t.symbol),1)]),C("div",he,[C("i",{class:"iconfont icon-tiaozhengzu",onClick:R((e=>o.switchGroup(t)),["stop"])},null,8,me)]),C("div",ue,[C("i",{class:I(["iconfont icon-zhiding",{disabled:0===i}]),onClick:R((e=>o.tokenSetTop(t,i)),["stop"])},null,10,fe),C("i",{class:I(["iconfont icon-shangyi",{disabled:0===i}]),onClick:R((e=>o.changeFavoritesIndex(t,i,-1)),["stop"])},null,10,pe),C("i",{class:I(["iconfont icon-xiayi",{disabled:i+1===s.favoritesList.length}]),onClick:R((e=>o.changeFavoritesIndex(t,i,1)),["stop"])},null,10,ve)]),C("div",be,[C("i",{class:"iconfont icon-zhongmingming",onClick:R((e=>o.handleEditRemark(t)),["stop"])},null,8,ge)])])])),_:2},1032,["item","active","data-index"])])),_:1},8,["items"])):z("",!0),V(T(m,{class:"empty",image:e.emptyNoDataLight,description:e.$t("emptyData")},null,8,["image","description"]),[[D,s.favoritesList&&0===s.favoritesList.length||!o.groups]])])])):"2"===i.active?(G(),U("section",ye,[T(f,{title:"",onClick:t[1]||(t[1]=e=>s.visible2=!0),clickable:""},{value:F((()=>[T(u,{class:"icon-add-o",name:"add-o"}),C("span",ke,x(e.$t("newGroup")),1)])),_:1}),C("ul",$e,[C("li",_e,[C("div",Ge,x(e.$t("groupName")),1),C("div",we,x(e.$t("rename")),1),C("div",Fe,x(e.$t("sort")),1),C("div",Ce,x(e.$t("operate")),1)]),(G(!0),U(N,null,L(o.groups,((e,t)=>(G(),U("li",{key:t,class:"table-item"},[C("div",xe,x(e.name),1),C("div",Te,[C("i",{class:"iconfont icon-zhongmingming",onClick:R((t=>o.rename(e)),["stop"])},null,8,Se)]),C("div",Ue,[C("i",{class:I(["iconfont icon-zhiding",{disabled:0===t}]),onClick:R((i=>o.setTopFavoriteGroup(e,t)),["stop"])},null,10,Ne),C("i",{class:I(["iconfont icon-shangyi",{disabled:0===t}]),onClick:R((i=>o.changeIndexFavoriteGroup(e,t,-1)),["stop"])},null,10,Le),C("i",{class:I(["iconfont icon-xiayi",{disabled:t+1===o.groups.length}]),onClick:R((i=>o.changeIndexFavoriteGroup(e,t,1)),["stop"])},null,10,ze)]),C("div",Re,[C("i",{class:"iconfont icon-ashbin",onClick:R((t=>o.removeFavoriteGroup(e)),["stop"])},null,8,Ie)])])))),128)),V(T(m,{class:"empty",image:e.emptyNoDataLight,description:e.$t("emptyData")},null,8,["image","description"]),[[D,o.groups&&0===o.groups.length||!o.groups]])])])):z("",!0),T(p,{visible:s.visible1,"onUpdate:visible":t[2]||(t[2]=e=>s.visible1=e),selected:s.activeGroup,"onUpdate:selected":t[3]||(t[3]=e=>s.activeGroup=e),title:e.$t("pleaseSelectGroup"),groups:o.groups,onSelect:o.confirmSwitchGroup},null,8,["visible","selected","title","groups","onSelect"]),T(v,{visible:s.visible2,"onUpdate:visible":t[4]||(t[4]=e=>s.visible2=e),confirmSubmit:o.addFavoriteGroup},null,8,["visible","confirmSubmit"]),T(v,{visible:s.visible3,"onUpdate:visible":t[5]||(t[5]=e=>s.visible3=e),confirmSubmit:o.changeFavoriteGroupName},null,8,["visible","confirmSubmit"]),T(b,{visible:s.visible4,"onUpdate:visible":t[6]||(t[6]=e=>s.visible4=e),initRemark:s.curRemark,confirmSubmit:o.confirmEditRemark},null,8,["visible","initRemark","confirmSubmit"]),T(g,{show:s.show,"onUpdate:show":t[7]||(t[7]=e=>s.show=e),actions:s.actions,"cancel-text":e.$t("cancel"),onSelect:o.select,"close-on-click-action":""},null,8,["show","actions","cancel-text","onSelect"])],64)}],["__scopeId","data-v-9adc118e"]]);const De={name:"NftFavoriteManage",props:{active:{type:String,default:"1"},activeType:{type:String,default:"1"}},components:{ChangeGroup:J,ChangeName:A,EditRemark:Q},data:()=>({activeGroup:0,visible1:!1,visible2:!1,visible3:!1,visible4:!1,selectedToken:{},favoritesList:[],curGroup:{},show:!1,actions:[{name:"Token",value:"1"},{name:"NFT",value:"2"}],curRemark:"",curToken:{}}),computed:{groups(){return this.$store.state.userNftFavoriteGroups},activeName(){let e={1:"Token",2:"NFT"};return(null==e?void 0:e[this.activeType])||"Token"}},watch:{activeType(e){"2"===e&&this.getUserFavorites()},activeGroup(){this.getUserFavorites()},groups:{handler(){this.activeGroup=0},deep:!0},"$store.state.currentAccount"(e){e&&this.getUserFavorites()}},created(){this.init()},methods:{init(){this.$store.dispatch("getUserNftFavoriteGroups"),this.getUserFavorites()},async getUserFavorites(){this.favoritesList=await u(this.activeGroup).catch((async()=>[]))},switchGroup(e){this.selectedToken=e,this.visible1=!0},tokenSetTop(e,t){if(0===t)return;let i=this.$toast.loading({forbidClick:!0,duration:0});f(e._id,this.activeGroup).then((e=>{this.getUserFavorites(),this.$notify({type:"success",message:this.$t("success")})})).catch((()=>{this.$notify({type:"danger",message:this.$t("fail")})})).finally((()=>{i.clear()}))},changeNftFavoritesIndex(e,t,i){if(!this.$f.verifyLogin())return;let a=e._id,s=t+i;if(s<0||s+1>this.favoritesList.length)return;let o=this.favoritesList[s]._id,l=this.$toast.loading({forbidClick:!0,duration:0});p(a,o,this.activeGroup).then((e=>{e?(this.getUserFavorites(),this.$notify({type:"success",message:this.$t("success")})):this.$notify({type:"danger",message:this.$t("fail")})})).catch((e=>{console.log(e),this.$notify({type:"danger",message:this.$t("fail")})})).finally((()=>{l.clear()}))},confirmSwitchGroup(e){if(this.$f.verifyLogin())if(this.activeGroup!==e){let t=this.$toast.loading({forbidClick:!0,duration:0});v(this.selectedToken._id,e).then((e=>{e?(this.getUserFavorites(),this.$store.dispatch("getUserFavorites"),this.$notify({type:"success",message:this.$t("success")}),this.visible1=!1):this.$notify({type:"danger",message:this.$t("fail")})})).catch((e=>{console.log(e),this.$notify({type:"danger",message:this.$t("fail")})})).finally((()=>{t.clear()}))}else this.visible1=!1},addNftFavoriteGroup(e){if(!this.$f.verifyLogin())return;let t=this.$toast.loading({forbidClick:!0,duration:0});a(e).then((e=>{e?(this.$store.dispatch("getUserNftFavoriteGroups"),this.$notify({type:"success",message:this.$t("success")}),this.visible2=!1):this.$notify({type:"danger",message:this.$t("fail")})})).catch((e=>{console.log(e),this.$notify({type:"danger",message:this.$t("fail")})})).finally((()=>{t.clear()}))},removeNftFavoriteGroup(e){this.$f.verifyLogin()&&this.$dialog.confirm({title:this.$t("tips"),message:this.$t("removeFavGroupTips"),confirmButtonText:this.$t("confirm"),cancelButtonText:this.$t("cancel")}).then((()=>{let t=this.$toast.loading({forbidClick:!0,duration:0});b(e.group_id).then((e=>{e?(this.$store.dispatch("getUserNftFavoriteGroups"),this.getUserFavorites(),this.$notify({type:"success",message:this.$t("success")}),this.visible2=!1):this.$notify({type:"danger",message:this.$t("fail")})})).catch((e=>{console.log(e),this.$notify({type:"danger",message:this.$t("fail")})})).finally((()=>{t.clear()}))})).catch((()=>{}))},setTopNftFavoriteGroup(e,t){if(!this.$f.verifyLogin())return;if(0===t)return;let i=this.$toast.loading({forbidClick:!0,duration:0});g(e.group_id).then((e=>{this.$store.dispatch("getUserNftFavoriteGroups"),this.$notify({type:"success",message:this.$t("success")})})).catch((()=>{this.$notify({type:"danger",message:this.$t("fail")})})).finally((()=>{i.clear()}))},changeIndexNftFavoriteGroup(e,t,i){if(!this.$f.verifyLogin())return;let a=e.group_id,s=t+i;if(s<0||s+1>this.groups.length)return;let o=this.groups[s].group_id,l=this.$toast.loading({forbidClick:!0,duration:0});y(a,o).then((e=>{e?(this.$store.dispatch("getUserNftFavoriteGroups"),this.visible3=!1,this.$notify({type:"success",message:this.$t("success")})):this.$notify({type:"danger",message:this.$t("fail")})})).catch((e=>{console.log(e),this.$notify({type:"danger",message:this.$t("fail")})})).finally((()=>{l.clear()}))},rename(e){this.curGroup=e,this.visible3=!0},changeNftFavoriteGroupName(e){if(!this.$f.verifyLogin())return;let t=this.$toast.loading({forbidClick:!0,duration:0});k(e,this.curGroup.group_id).then((e=>{e?(this.$store.dispatch("getUserNftFavoriteGroups"),this.visible3=!1,this.$notify({type:"success",message:this.$t("success")})):this.$notify({type:"danger",message:this.$t("fail")})})).catch((e=>{console.log(e),this.$notify({type:"danger",message:this.$t("fail")})})).finally((()=>{t.clear()}))},select(e){this.activeType=e.value},handleEditRemark(e){this.curRemark=e.remark||"",this.curToken=e,this.visible4=!0},confirmEditRemark(e){if(!this.$f.verifyLogin())return;let t=this.$toast.loading({forbidClick:!0,duration:0});$(this.curToken._id,e).then((e=>{e?(this.getUserFavorites(),this.visible4=!1,this.$notify({type:"success",message:this.$t("success")})):this.$notify({type:"danger",message:this.$t("fail")})})).catch((e=>{console.log(e),this.$notify({type:"danger",message:this.$t("fail")})})).finally((()=>{t.clear()}))}}},Ee={key:0},Be={class:"fav-tabs-container"},je={class:"table-list"},Me={class:"table-item table-header"},Ae={class:"table-item_d"},qe={class:"table-item_d"},He={class:"table-item_d"},Je={class:"table-item_d"},Oe={class:"table-item"},Pe={class:"token-info table-item_d"},Ke={class:"icon-token-container"},Qe={class:"token-symbol"},We={class:"table-item_d"},Xe=["onClick"],Ye={class:"table-item_d token-sort"},Ze=["onClick"],et=["onClick"],tt=["onClick"],it={class:"table-item_d"},at=["onClick"],st={key:1},ot={class:"add-text"},lt={class:"table-list"},nt={class:"table-item table-header"},rt={class:"table-item_d"},ct={class:"table-item_d"},dt={class:"table-item_d"},ht={class:"table-item_d"},mt={class:"table-item_d"},ut={class:"table-item_d"},ft=["onClick"],pt={class:"table-item_d"},vt=["onClick"],bt=["onClick"],gt=["onClick"],yt={class:"table-item_d"},kt=["onClick"];var $t=t(De,[["render",function(e,t,i,a,s,o){var l;const n=_("van-tab"),r=_("van-tabs"),c=_("van-image"),d=_("DynamicScrollerItem"),h=_("DynamicScroller"),m=_("van-empty"),u=_("van-icon"),f=_("van-cell"),p=_("ChangeGroup"),v=_("ChangeName"),b=_("EditRemark");return G(),U(N,null,["1"===i.active?(G(),U("section",Ee,[C("div",Be,[T(r,{class:"fav-tabs",active:s.activeGroup,"onUpdate:active":t[0]||(t[0]=e=>s.activeGroup=e),border:"",color:"#558BED",ellipsis:!1,background:"transparent"},{default:F((()=>[T(n,{title:e.$t("defaultGroup"),name:0},null,8,["title"]),(G(!0),U(N,null,L(o.groups,((e,t)=>(G(),w(n,{key:t,title:e.name,name:e.group_id},null,8,["title","name"])))),128))])),_:1},8,["active"])]),C("ul",je,[C("li",Me,[C("div",Ae,x(e.$t("token")),1),C("div",qe,x(e.$t("changeGroup")),1),C("div",He,x(e.$t("sort")),1),C("div",Je,x(e.$t("remark")),1)]),(null===(l=s.favoritesList)||void 0===l?void 0:l.length)>0?(G(),w(h,{key:0,items:s.favoritesList,"min-item-size":30,keyField:"_id","page-mode":"",class:"scroller"},{default:F((({item:t,index:i,active:a})=>[T(d,{item:t,active:a,"data-index":i},{default:F((()=>[C("li",Oe,[C("div",Pe,[C("div",Ke,[T(c,{round:"",width:"0.72rem",height:"0.72rem","icon-size":"0.72rem","lazy-load":"","show-loading":"",src:null==t?void 0:t.logo,"error-icon":e.iconDefault},null,8,["src","error-icon"])]),C("span",Qe,x((null==t?void 0:t.name)||""),1)]),C("div",We,[C("i",{class:"iconfont icon-tiaozhengzu",onClick:R((e=>o.switchGroup(t)),["stop"])},null,8,Xe)]),C("div",Ye,[C("i",{class:I(["iconfont icon-zhiding",{disabled:0===i}]),onClick:R((e=>o.tokenSetTop(t,i)),["stop"])},null,10,Ze),C("i",{class:I(["iconfont icon-shangyi",{disabled:0===i}]),onClick:R((e=>o.changeNftFavoritesIndex(t,i,-1)),["stop"])},null,10,et),C("i",{class:I(["iconfont icon-xiayi",{disabled:i+1===s.favoritesList.length}]),onClick:R((e=>o.changeNftFavoritesIndex(t,i,1)),["stop"])},null,10,tt)]),C("div",it,[C("i",{class:"iconfont icon-zhongmingming",onClick:R((e=>o.handleEditRemark(t)),["stop"])},null,8,at)])])])),_:2},1032,["item","active","data-index"])])),_:1},8,["items"])):z("",!0),V(T(m,{class:"empty",image:e.emptyNoDataLight,description:e.$t("emptyData")},null,8,["image","description"]),[[D,s.favoritesList&&0===s.favoritesList.length||!o.groups]])])])):"2"===i.active?(G(),U("section",st,[T(f,{title:"",onClick:t[1]||(t[1]=e=>s.visible2=!0),clickable:""},{value:F((()=>[T(u,{class:"icon-add-o",name:"add-o"}),C("span",ot,x(e.$t("newGroup")),1)])),_:1}),C("ul",lt,[C("li",nt,[C("div",rt,x(e.$t("groupName")),1),C("div",ct,x(e.$t("rename")),1),C("div",dt,x(e.$t("sort")),1),C("div",ht,x(e.$t("operate")),1)]),(G(!0),U(N,null,L(o.groups,((e,t)=>(G(),U("li",{key:t,class:"table-item"},[C("div",mt,x(e.name),1),C("div",ut,[C("i",{class:"iconfont icon-zhongmingming",onClick:R((t=>o.rename(e)),["stop"])},null,8,ft)]),C("div",pt,[C("i",{class:I(["iconfont icon-zhiding",{disabled:0===t}]),onClick:R((i=>o.setTopNftFavoriteGroup(e,t)),["stop"])},null,10,vt),C("i",{class:I(["iconfont icon-shangyi",{disabled:0===t}]),onClick:R((i=>o.changeIndexNftFavoriteGroup(e,t,-1)),["stop"])},null,10,bt),C("i",{class:I(["iconfont icon-xiayi",{disabled:t+1===o.groups.length}]),onClick:R((i=>o.changeIndexNftFavoriteGroup(e,t,1)),["stop"])},null,10,gt)]),C("div",yt,[C("i",{class:"iconfont icon-ashbin",onClick:R((t=>o.removeNftFavoriteGroup(e)),["stop"])},null,8,kt)])])))),128)),V(T(m,{class:"empty",image:e.emptyNoDataLight,description:e.$t("emptyData")},null,8,["image","description"]),[[D,o.groups&&0===o.groups.length||!o.groups]])])])):z("",!0),T(p,{visible:s.visible1,"onUpdate:visible":t[2]||(t[2]=e=>s.visible1=e),selected:s.activeGroup,"onUpdate:selected":t[3]||(t[3]=e=>s.activeGroup=e),title:e.$t("pleaseSelectGroup"),groups:o.groups,onSelect:o.confirmSwitchGroup},null,8,["visible","selected","title","groups","onSelect"]),T(v,{visible:s.visible2,"onUpdate:visible":t[4]||(t[4]=e=>s.visible2=e),confirmSubmit:o.addNftFavoriteGroup},null,8,["visible","confirmSubmit"]),T(v,{visible:s.visible3,"onUpdate:visible":t[5]||(t[5]=e=>s.visible3=e),confirmSubmit:o.changeNftFavoriteGroupName},null,8,["visible","confirmSubmit"]),T(b,{visible:s.visible4,"onUpdate:visible":t[6]||(t[6]=e=>s.visible4=e),initRemark:s.curRemark,confirmSubmit:o.confirmEditRemark},null,8,["visible","initRemark","confirmSubmit"])],64)}],["__scopeId","data-v-ff4684f2"]]);e("default",t({name:"FavoriteManage",data(){return{active:this.$route.params.id||"1",activeType:this.$route.params.type||"1",show:!1,actions:[{name:"Token",value:"1"},{name:"NFT",value:"2"}]}},computed:{curComponent(){return"2"===this.activeType?$t:Ve},activeName(){let e={1:"Token",2:"NFT"};return(null==e?void 0:e[this.activeType])||"Token"}},methods:{select(e){this.activeType=e.value},back(){var e,t,i,a,s;null!==(e=window)&&void 0!==e&&null!==(t=e.main)&&void 0!==t&&t.back?null===(i=window)||void 0===i||null===(a=i.main)||void 0===a||null===(s=a.back)||void 0===s||s.call(a):this.$router.go(-1)}}},[["render",function(e,t,i,a,s,o){const l=_("van-tab"),n=_("van-tabs"),r=_("van-icon"),c=_("van-nav-bar"),d=_("van-action-sheet");return G(),U(N,null,[T(c,{"left-text":"","left-arrow":"",onClickLeft:o.back,fixed:"",placeholder:"","safe-area-inset-top":"","z-index":"2"},{title:F((()=>[T(n,{class:"tab-top",active:s.active,"onUpdate:active":t[0]||(t[0]=e=>s.active=e),type:"card",color:"#fff",background:"#2C3254","title-active-color":"#878FBC","title-inactive-color":"#878FBC"},{default:F((()=>[T(l,{title:e.$t("favoriteManage"),name:"1"},null,8,["title"]),T(l,{title:e.$t("groupManage"),name:"2"},null,8,["title"])])),_:1},8,["active"])])),right:F((()=>[C("button",{class:"select-btn",onClick:t[1]||(t[1]=R((e=>s.show=!0),["stop"]))},[S(x(o.activeName)+" ",1),T(r,{name:"arrow-down"})])])),_:1},8,["onClickLeft"]),(G(),w(E(o.curComponent),{activeType:s.activeType,active:s.active},null,8,["activeType","active"])),T(d,{show:s.show,"onUpdate:show":t[2]||(t[2]=e=>s.show=e),actions:s.actions,"cancel-text":e.$t("cancel"),onSelect:o.select,"close-on-click-action":""},null,8,["show","actions","cancel-text","onSelect"])],64)}],["__scopeId","data-v-3bb63cbc"]]))}}}))}();
