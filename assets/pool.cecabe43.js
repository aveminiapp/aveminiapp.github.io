var e=Object.defineProperty,t=Object.defineProperties,i=Object.getOwnPropertyDescriptors,n=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,l=(t,i,n)=>i in t?e(t,i,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[i]=n,s=(e,t)=>{for(var i in t||(t={}))o.call(t,i)&&l(e,i,t[i]);if(n)for(var i of n(t))a.call(t,i)&&l(e,i,t[i]);return e},r=(e,n)=>t(e,i(n));import{_ as c,N as d,x as h}from"./index.6c76ef74.js";import{r as u,o as m,v as p,A as v,D as f,F as b,y as g,M as w,J as k,P as y,x as $,Q as _,R as x,w as N,c as S,G as L,H as C}from"./vendor.9d88699e.js";const P={name:"NewPair",props:{tableList:Array,loading:{type:Boolean,default:!1}},data:()=>({}),computed:{isLoading(){return this.loading}},methods:{tableRowClick(e){var t,i,n;(null==(t=null==window?void 0:window.main)?void 0:t.openMarket)?null==(n=null==(i=null==window?void 0:window.main)?void 0:i.openMarket)||n.call(i,e.target_token,e.chain):this.$f.openBrowser("https://ave.ai/token/"+e.target_token+"-"+e.chain)}}},D=e=>(_("data-v-f96f9bd4"),e=e(),x(),e),z={class:"table"},U={class:"table-list"},O={class:"table-item table-header"},V={class:"table-item_d"},B={class:"table-item_d"},j=D((()=>v("th",{class:"table-item_d th"},"AMM",-1))),M={class:"table-item_d"},E=["onClick"],q={class:"table-item_d symbol"},I={key:0},A={class:"main"},R=D((()=>v("br",null,null,-1))),T={class:"minor"},F={key:1},G={class:"main"},H=D((()=>v("br",null,null,-1))),J={class:"minor"},Q={class:"table-item_d"},K={class:"main"},W=D((()=>v("br",null,null,-1))),X={class:"minor"},Y={class:"main"},Z=D((()=>v("br",null,null,-1))),ee={class:"minor"},te={class:"table-item_d"},ie={class:"main"},ne=D((()=>v("br",null,null,-1))),oe={class:"icon-svg icon-symbol",style:{cursor:"default"},"aria-hidden":"true"},ae=["xlink:href"],le={class:"table-item_d"},se={class:"main"},re=D((()=>v("br",null,null,-1))),ce={class:"minor"};const de={style:{display:"flex","align-items":"center"}},he={class:"icon-svg icon-net-connect","aria-hidden":"true"},ue=["xlink:href"],me={class:"btn-content"},pe={class:"icon-svg icon-net-connect","aria-hidden":"true"},ve=["xlink:href"],fe={style:{height:"50vh","overflow-y":"auto"}},be={class:"icon-svg icon-net-connect","aria-hidden":"true"},ge=["xlink:href"],we={class:"popup-title"},ke={key:0,class:"icon-svg icon-net-connect","aria-hidden":"true"},ye=["xlink:href"],$e={class:"btn-content"};var _e=c({name:"Pool",components:{NewPairs:c(P,[["render",function(e,t,i,n,o,a){const l=u("van-empty");return m(),p("div",z,[v("table",U,[v("tr",O,[v("th",V,f(e.$t("poolPair")),1),v("th",B,f(e.$t("pairAmount")),1),j,v("th",M,f(e.$t("poolSize")),1)]),(m(!0),p(b,null,g(i.tableList,((t,i)=>(m(),p("tr",{class:"table-item",key:i,onClick:w((e=>a.tableRowClick(t)),["stop"])},[v("td",q,[t.target_token===t.token0_address?(m(),p("div",I,[v("span",A,f(t.token0_symbol),1),R,v("span",T,"/"+f(t.token1_symbol),1)])):(m(),p("div",F,[v("span",G,f(t.token1_symbol),1),H,v("span",J,"/"+f(t.token0_symbol),1)]))]),v("td",Q,[t.target_token===t.token0_address?(m(),p(b,{key:0},[v("span",K,f(e.$f.formatNumUnit(t.reserve0,2)),1),W,v("span",X,"/"+f(e.$f.formatNumUnit(t.reserve1,2)),1)],64)):(m(),p(b,{key:1},[v("span",Y,f(e.$f.formatNumUnit(t.reserve1,2)),1),Z,v("span",ee,"/"+f(e.$f.formatNumUnit(t.reserve0,2)),1)],64))]),v("td",te,[v("span",ie,f(t.amm),1),ne,(m(),p("svg",oe,[v("use",{"xlink:href":`#icon-${t.chain}`},null,8,ae)]))]),v("td",le,[v("span",se,"$"+f(t.target_token!==t.token0_address?e.$f.formatNumUnit(Math.round(t.reserve0*t.token0_price_usd*2)):e.$f.formatNumUnit(Math.round(t.reserve1*t.token1_price_usd*2))),1),re,v("span",ce,f(e.$dayjs(1e3*t.created_at).fromNow()),1)])],8,E)))),128))]),k($(l,{class:"empty",image:e.emptyNoDataLight,description:e.$t("empty")},null,8,["image","description"]),[[y,i.tableList&&0===i.tableList.length&&!a.isLoading]])])}],["__scopeId","data-v-f96f9bd4"]])},data(){let e=Object.values(d);e=e.map((e=>r(s({},e),{amm:Object.keys(e.swapUrl)})));const t=e.reduce(((e,t)=>e.concat(t.amm)),[]);return{conditions:{pageNO:1,pageSize:15,sort:"created_at",direction:"desc",chain:"",amm:"",minPoolSize:1e5},initNetworkList:e,amms:t,tableData:[],loading:!1,total:1e3,show:!1,filterPopupVisible:!1,listLoading:!1,finished:!1,show1:!1,show2:!1,error:!1,poolSizeOption:[{text:"$10000",value:1e4},{text:"$100000",value:1e5},{text:"$500000",value:5e5},{text:"$1000000",value:1e6},{text:"$2000000",value:2e6}]}},computed:{networkList(){return[{netName:"",name:this.$t("allChain")},...this.initNetworkList]},ammList(){var e;let t=[];return t=this.conditions.chain?(null==(e=this.initNetworkList.find((e=>e.netName===this.conditions.chain)))?void 0:e.amm)||[]:this.amms,[{text:this.$t("allPool"),value:""}].concat(t.map((e=>({text:e,value:e}))))},chainName(){var e,t,i,n;return this.conditions.chain&&(null==(t=null==(e=d)?void 0:e[this.conditions.chain])?void 0:t.name)?null==(n=null==(i=d)?void 0:i[this.conditions.chain])?void 0:n.name:this.$t("allChain")},sortByList(){return[{name:this.$t("createdTime"),value:"created_at",color:"created_at"===this.conditions.sort?"#558BED":""},{name:this.$t("poolCirculatingSupply"),value:"poolSize",color:"poolSize"===this.conditions.sort?"#558BED":""}]},sortDirectionList(){return[{name:this.$t("ascending"),value:"asc",color:"asc"===this.conditions.direction?"#558BED":""},{name:this.$t("descending"),value:"desc",color:"desc"===this.conditions.direction?"#558BED":""}]},activeSort(){var e;return null==(e=this.sortByList.find((e=>e.value===this.conditions.sort)))?void 0:e.name},activeDirection(){var e;return null==(e=this.sortDirectionList.find((e=>e.value===this.conditions.direction)))?void 0:e.name}},activated(){this.getNewPairs()},methods:{query(){this.filterPopupVisible=!1,this.conditions.pageNO=1,this.tableData=[],this.finished=!1,this.error=!1,this.getNewPairs()},getNewPairs(){this.loading=!0,h(r(s({},this.conditions),{minPoolSize:Math.round(this.conditions.minPoolSize/2)})).then((e=>{this.total=e.total,this.tableData=this.tableData.concat(e.data),(this.tableData.length>=this.total||e.data.length<this.conditions.pageSize)&&(this.finished=!0)})).catch((()=>{this.error=!0})).finally((()=>{this.loading=!1}))},selectChain(e){this.show=!1,this.$refs.dropDownChain.toggle(!1),this.conditions.chain=e.netName,this.conditions.amm="",this.query()},onLoad(){this.conditions.pageNO++,this.getNewPairs()},onSelect1(e){this.conditions.sort=e.value,this.show1=!1},onSelect2(e){this.conditions.direction=e.value,this.show2=!1}}},[["render",function(e,t,i,n,o,a){const l=u("van-icon"),s=u("van-cell"),r=u("van-dropdown-item"),c=u("van-dropdown-menu"),d=u("new-pairs"),h=u("van-list"),k=u("van-action-sheet"),y=u("van-button"),_=u("van-field"),x=u("van-stepper"),P=u("van-form"),D=u("van-popup");return m(),p(b,null,[$(c,{"active-color":"#558BED",class:"filter-menu"},{default:N((()=>[$(r,{modelValue:o.conditions.chain,"onUpdate:modelValue":t[0]||(t[0]=e=>o.conditions.chain=e),teleport:"#app",ref:"dropDownChain"},{title:N((()=>[v("div",de,[(m(),p("svg",he,[v("use",{"xlink:href":`#icon-${o.conditions.chain}`},null,8,ue)])),v("span",me,f(a.chainName),1)])])),default:N((()=>[(m(!0),p(b,null,g(a.networkList,(t=>(m(),S(s,{key:t.netName,class:"list-item",onClick:w((e=>a.selectChain(t)),["stop"]),title:t.name,icon:e.$f.formatIcon(t),size:"large",clickable:"",center:""},{icon:N((()=>[(m(),p("svg",pe,[v("use",{"xlink:href":`#icon-${t.netName}`},null,8,ve)]))])),"right-icon":N((()=>[o.conditions.chain===t.netName?(m(),S(l,{key:0,color:"#558BED",name:"success"})):L("",!0)])),_:2},1032,["onClick","title","icon"])))),128))])),_:1},8,["modelValue"]),$(r,{modelValue:o.conditions.amm,"onUpdate:modelValue":t[1]||(t[1]=e=>o.conditions.amm=e),options:a.ammList,onChange:a.query},null,8,["modelValue","options","onChange"]),$(r,{modelValue:o.conditions.minPoolSize,"onUpdate:modelValue":t[2]||(t[2]=e=>o.conditions.minPoolSize=e),options:o.poolSizeOption,onChange:a.query},null,8,["modelValue","options","onChange"])])),_:1}),v("main",null,[$(h,{loading:o.loading,"onUpdate:loading":t[3]||(t[3]=e=>o.loading=e),finished:o.finished,error:o.error,"onUpdate:error":t[4]||(t[4]=e=>o.error=e),"error-text":e.$t("errorText"),onLoad:a.onLoad,"loading-text":e.$t("loading"),"finished-text":e.$t("noMore")},{default:N((()=>[$(d,{tableList:o.tableData,loading:o.loading},null,8,["tableList","loading"])])),_:1},8,["loading","finished","error","error-text","onLoad","loading-text","finished-text"]),$(k,{show:o.show,"onUpdate:show":t[5]||(t[5]=e=>o.show=e),"cancel-text":e.$t("cancel"),description:e.$t("selectChain"),teleport:"#app","close-on-click-action":""},{default:N((()=>[v("div",fe,[(m(!0),p(b,null,g(a.networkList,(t=>(m(),S(s,{key:t.netName,class:"list-item",onClick:w((e=>a.selectChain(t)),["stop"]),title:t.name,icon:e.$f.formatIcon(t),value:t.netName,size:"large",clickable:""},{icon:N((()=>[(m(),p("svg",be,[v("use",{"xlink:href":`#icon-${t.netName}`},null,8,ge)]))])),_:2},1032,["onClick","title","icon","value"])))),128))])])),_:1},8,["show","cancel-text","description"]),$(D,{show:o.filterPopupVisible,"onUpdate:show":t[10]||(t[10]=e=>o.filterPopupVisible=e),class:"popup-container filter",closeable:!0,"close-on-click-overlay":!1,"close-on-popstate":!1,round:"",position:"center",teleport:"#app",style:{width:"90%"}},{default:N((()=>[v("h3",we,f(e.$t("filterCriteria")),1),$(P,{class:"popup-content",ref:"form","validate-first":"",onSubmit:a.query,"input-align":"right"},{default:N((()=>[$(_,{label:"Chain",placeholder:"",readonly:""},{input:N((()=>[$(y,{plain:"",hairline:"",type:"primary",size:"small",onClick:t[6]||(t[6]=e=>o.show=!0)},{default:N((()=>[o.conditions.chain?(m(),p("svg",ke,[v("use",{"xlink:href":`#icon-${o.conditions.chain}`},null,8,ye)])):L("",!0),v("span",$e,f(a.chainName),1),$(l,{name:"arrow-down"})])),_:1})])),_:1}),$(_,{label:e.$t("minCirculatingSupply"),placeholder:"",readonly:""},{input:N((()=>[$(x,{modelValue:o.conditions.minPoolSize,"onUpdate:modelValue":t[7]||(t[7]=e=>o.conditions.minPoolSize=e),"input-width":"80px",min:1e5,step:1e4},null,8,["modelValue"])])),_:1},8,["label"]),$(_,{label:e.$t("sortBy"),placeholder:"",readonly:"",clickable:"","right-icon":"arrow-down","model-value":a.activeSort,onClick:t[8]||(t[8]=w((e=>o.show1=!0),["stop"]))},null,8,["label","model-value"]),$(_,{label:e.$t("sortDirection"),placeholder:"",readonly:"",clickable:"","right-icon":"arrow-down","model-value":a.activeDirection,onClick:t[9]||(t[9]=w((e=>o.show2=!0),["stop"]))},null,8,["label","model-value"]),$(y,{class:"sumbit-btn",round:"",block:"",type:"primary","native-type":"submit"},{default:N((()=>[C(f(e.$t("search")),1)])),_:1})])),_:1},8,["onSubmit"])])),_:1},8,["show"]),$(k,{show:o.show1,"onUpdate:show":t[11]||(t[11]=e=>o.show1=e),"cancel-text":e.$t("cancel"),description:e.$t("sortBy"),teleport:"#app","close-on-click-action":"",actions:a.sortByList,onSelect:a.onSelect1},null,8,["show","cancel-text","description","actions","onSelect"]),$(k,{show:o.show2,"onUpdate:show":t[12]||(t[12]=e=>o.show2=e),"cancel-text":e.$t("cancel"),description:e.$t("sortDirection"),teleport:"#app","close-on-click-action":"",actions:a.sortDirectionList,onSelect:a.onSelect2},null,8,["show","cancel-text","description","actions","onSelect"])])],64)}],["__scopeId","data-v-81366382"]]);export{_e as default};
